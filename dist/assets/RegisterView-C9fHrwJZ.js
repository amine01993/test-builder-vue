import{d as L,u as M,b as q,r as d,e as D,f as O,g as W,p as j,E as B,q as F,_ as H,h as T,c as a,a as P,i,F as v,j as V,k as b,w as S,v as C,n as U,t as w,l as p,m as z,o as n}from"./index-DGIsIOIk.js";import{u as J,A as K,a as Q}from"./AppMenu-D159pOy6.js";const X=L({__name:"RegisterView",setup(R,{expose:s}){s();const u=M(),{auth:e,user:_,isAnonymous:h,signUpWithGoogle:g}=q(),{validateEmail:o}=J(),f=d(""),m=d(""),A=d(""),c=d(!1);let t=d(null);const k=d(!1),y=d([]),E=D(()=>{const r={};if(!k.value)return r;if(f.value===""?r.email="Email required":o(f.value)||(r.email="Invalid email"),m.value==="")r.password=["Password required"];else if(t.value&&!t.value.isValid){console.log("validationStatus",t);const l=[];t.value.containsLowercaseLetter!==!0&&l.push("Require lowercase character"),t.value.containsNonAlphanumericCharacter!==!0&&l.push("Require special character"),t.value.containsNumericCharacter!==!0&&l.push("Require numeric character"),t.value.meetsMinPasswordLength!==!0&&l.push("Minimum password length is 7"),t.value.meetsMaxPasswordLength!==!0&&l.push("Password too long"),r.password=l}else m.value!==A.value&&(r.confirmPass="Password mismatch");return r}),x=O(e,r=>{console.log("Registerview onAuthStateChanged",r),h(r)||u.push({name:"home"})});W(()=>{x()});async function I(){if(!c.value){if(c.value=!0,t.value=await j(e,m.value),k.value=!0,Object.keys(E.value).length>0){c.value=!1;return}try{const r=B.credential(f.value,m.value),l=await F(_.value,r);console.log("register.userCredential",l),u.push({name:"home"})}catch(r){console.log("register.error"),y.value=["Server Error: "+r.code]}finally{c.value=!1}}}async function G(){try{await g(),u.push({name:"home"})}catch(r){console.log("register.error"),y.value=["Server Error: "+r.code]}}const N={router:u,auth:e,user:_,isAnonymous:h,signUpWithGoogle:g,validateEmail:o,email:f,password:m,confirmPass:A,submitting:c,get validationStatus(){return t},set validationStatus(r){t=r},submitted:k,serverErrors:y,errors:E,onAuthEventDispose:x,register:I,signUpWithG:G,AppHeader:K,AppMenu:Q};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),Y={class:"app-main"},Z={class:"sign-container"},$={class:"login-form"},ss={key:0,class:"alert alert-danger",role:"alert"},es={class:"mb-3"},is={class:"input-group"},rs=["disabled"],os={key:0,class:"invalid-feedback is-invalid"},ts={class:"mb-3"},as={class:"input-group"},ns=["disabled"],ls={class:"mb-3"},ds={class:"input-group"},us=["disabled"],ms={key:0,class:"invalid-feedback is-invalid"},cs=["disabled"],vs={class:"signup-link"};function ps(R,s,u,e,_,h){const g=T("RouterLink");return n(),a(v,null,[P(e.AppHeader),P(e.AppMenu),i("div",Y,[i("div",Z,[i("div",$,[s[9]||(s[9]=i("div",{class:"login-form-title mb-4"},"Sign Up",-1)),e.serverErrors.length?(n(),a("div",ss,[i("ul",null,[(n(!0),a(v,null,V(e.serverErrors,o=>(n(),a("li",{key:o},w(o),1))),128))])])):b("",!0),i("div",es,[s[4]||(s[4]=i("label",{for:"login-input-email",class:"form-label"},"Email",-1)),i("div",is,[s[3]||(s[3]=i("span",{class:"input-group-text"},[i("i",{class:"bi bi-at"})],-1)),S(i("input",{type:"email",class:U(["form-control",{"is-invalid":e.errors.email}]),id:"login-input-email","onUpdate:modelValue":s[0]||(s[0]=o=>e.email=o),disabled:e.submitting},null,10,rs),[[C,e.email]]),e.errors.email?(n(),a("div",os,w(e.errors.email),1)):b("",!0)])]),i("div",ts,[s[6]||(s[6]=i("label",{for:"login-input-password",class:"form-label"},"Password",-1)),i("div",as,[s[5]||(s[5]=i("span",{class:"input-group-text"},[i("i",{class:"bi bi-lock-fill"})],-1)),S(i("input",{type:"password",class:U(["form-control",{"is-invalid":e.errors.password}]),id:"login-input-password","onUpdate:modelValue":s[1]||(s[1]=o=>e.password=o),disabled:e.submitting},null,10,ns),[[C,e.password]]),e.errors.password?(n(!0),a(v,{key:0},V(e.errors.password,o=>(n(),a("div",{class:"invalid-feedback is-invalid",key:o},w(o),1))),128)):b("",!0)])]),i("div",ls,[s[8]||(s[8]=i("label",{for:"login-input-password-confirm",class:"form-label"},"Confirm Password",-1)),i("div",ds,[s[7]||(s[7]=i("span",{class:"input-group-text"},[i("i",{class:"bi bi-lock-fill"})],-1)),S(i("input",{type:"password",class:U(["form-control",{"is-invalid":e.errors.confirmPass}]),id:"login-input-password-confirm","onUpdate:modelValue":s[2]||(s[2]=o=>e.confirmPass=o),disabled:e.submitting},null,10,us),[[C,e.confirmPass]]),e.errors.confirmPass?(n(),a("div",ms,w(e.errors.confirmPass),1)):b("",!0)])]),i("button",{type:"button",class:"btn btn-primary",onClick:e.register,disabled:e.submitting},[e.submitting?(n(),a(v,{key:1},[p("SIGNING UP ...")],64)):(n(),a(v,{key:0},[p("SIGN UP")],64))],8,cs)]),i("div",{class:"signup-parties"},[s[11]||(s[11]=p(" Or Sign Up Using ")),s[12]||(s[12]=i("br",null,null,-1)),i("button",{type:"button",class:"btn btn-danger google-auth",onClick:e.signUpWithG},s[10]||(s[10]=[i("i",{class:"bi bi-google"},null,-1)]))]),i("div",vs,[s[14]||(s[14]=p(" Or Sign In Using ")),s[15]||(s[15]=i("br",null,null,-1)),P(g,{to:{name:"login"}},{default:z(()=>s[13]||(s[13]=[p("SIGN IN")])),_:1})])])])],64)}const bs=H(X,[["render",ps],["__scopeId","data-v-bf0653ef"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/RegisterView.vue"]]);export{bs as default};
