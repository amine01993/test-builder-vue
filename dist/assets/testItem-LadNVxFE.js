import{y as g,u as D,b as L,M,N as k,r as b,x as i,c as S,e as x}from"./index-Cr91u6jy.js";import{u as E}from"./testService-jt7isDs9.js";import{a as _}from"./utils-DltTuOhC.js";function P(e){const c=g(),{locale:u,t}=D(),{showMessage:o,startLoading:l,endLoading:d}=L(),{deleteTest:f}=E(),{confirm:p}=M(),n=k("test-description"),a=b(!1),m=i(()=>a.value?e.description.replace(/\n/g,"<br />"):e.description.replace(/\n/g,"")),v=i(()=>{if(!e)return"";const r=e.updated_at.toDate();return _(r,u.value)});S(()=>{n.value&&n.value.addEventListener("click",s)}),x(()=>{n.value&&n.value.removeEventListener("click",s)});function s(){a.value=!0}function T(){e&&p(t('Are you sure you want to delete this test: "{name}"?',{name:e.name}),t("Delete"),y)}async function y(){if(e!=null&&e.id)try{l(),await f(e.id),o("success",t("Test deleted with success."))}catch{o("failure",t("Test can not be deleted."))}finally{d()}}async function h(){const r=c.resolve({name:"test-portal",params:{test_id:e.id}}),w=location.origin+r.fullPath;try{await navigator.clipboard.writeText(w),o("success",t("Test link copied!"))}catch{o("failure",t("Sorry, Test link couldn't be copied!"))}}return{showMore:a,description:m,updatedAt:v,confirmTestdeletion:T,copyTestLink:h}}export{P as u};
