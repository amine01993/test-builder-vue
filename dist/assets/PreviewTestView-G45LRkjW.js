import{d as D,s as L,u as V,b as F,H as M,a as B,x as g,o as N,e as P,g as E,h as S,w as H,i as c,k as u,j as e,t as d,C as I,q as f,F as j,l as q}from"./index-CEw6Ur-o.js";import{u as O}from"./testService-F-kZAI4C.js";import{f as Q}from"./utils-BFrGjP34.js";import{D as U}from"./DisplayQuestion-Bo3JfOln.js";import{A as R}from"./AppContainer-CrW-O1Ra.js";import"./firestore-O8Pw084e.js";import"./Question-DJVAB3JS.js";const Y=D({__name:"PreviewTestView",props:{test_id:{type:String,required:!0}},setup(h,{expose:i}){i();const m=L(),{t}=V(),{startLoading:p,endLoading:_,showMessage:o}=F(),{confirm:l}=M(),{auth:n}=B(),{test:r,time_limit:v,loadTest:b}=O();let a;const k=g(()=>{let s=Q(v.value);return s===""?t("Time out"):s}),C=g(()=>{var s;return(s=r.value)!=null&&s.description?r.value.description.replace(/\n/g,"<br />"):""}),T=N(n,async()=>{p();try{if(a=await b(h.test_id,!0),!r.value){o("failure",t("Test Not Found."));return}}catch{o("failure",t("Error loading test data."))}finally{_()}});P(()=>{T(),a!==void 0&&(clearInterval(a),a=void 0)});function x(){window.scrollTo(0,0)}function A(){l(t("Are you sure you want to submit the test?<br>You will not be able to continue the test once it is submitted."),t("Submit"),async()=>{y()})}function y(){m.push({name:"tests"})}const w={router:m,t,startLoading:p,endLoading:_,showMessage:o,confirmFinish:l,auth:n,test:r,time_limit:v,loadTest:b,get interval(){return a},set interval(s){a=s},timeLimit:k,description:C,onAuthEventDispose:T,moveToTheTop:x,finishTest:A,submitTest:y,DisplayQuestion:U,AppContainer:R};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),z={key:0,class:"app-test-header"},G={class:"test-name"},J={class:"test-limit"},K={key:1,class:"app-test-description"},W=["innerHTML"],X={class:"test-points"},Z={key:2,class:"app-main"},$={class:"app-test-actions"},tt=["aria-label"];function et(h,i,m,t,p,_){return c(),S(t.AppContainer,null,{default:H(()=>{var o,l;return[t.test?(c(),u("div",z,[e("div",G,d(t.test.name),1),e("div",J,[i[0]||(i[0]=e("i",{class:"bi bi-alarm"},null,-1)),I(" "+d(t.timeLimit),1)])])):f("",!0),(o=t.test)!=null&&o.description?(c(),u("div",K,[e("div",{class:"test-description",innerHTML:t.description},null,8,W),e("div",X," ("+d(t.test.max_points)+" pts) ",1)])):f("",!0),t.test?(c(),u("div",Z,[(c(!0),u(j,null,q((l=t.test)==null?void 0:l.questions,(n,r)=>(c(),S(t.DisplayQuestion,{key:n.id,question:n,choices:n.choices,nbr:r+1,preview:!0},null,8,["question","choices","nbr"]))),128)),e("div",$,[e("button",{type:"button",class:"btn btn-outline-primary to-the-top",onClick:t.moveToTheTop,"aria-label":t.t("go to the top of the page")},i[1]||(i[1]=[e("i",{class:"bi bi-arrow-up"},null,-1)]),8,tt),e("button",{type:"button",class:"btn btn-primary",onClick:t.finishTest},d(t.t("Finish The Test")),1)])])):f("",!0)]}),_:1})}const lt=E(Y,[["render",et],["__scopeId","data-v-66cf9a52"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/PreviewTestView.vue"]]);export{lt as default};
