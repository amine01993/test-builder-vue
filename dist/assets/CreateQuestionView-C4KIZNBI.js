import{d as M,q as O,g as D,u as U,r as a,c as B,h as F,i as P,P as j,j as z,_ as I,l as L,w as R,o as n,b as t,a as r,F as g,m as G,t as u,e as m,x,y as w,n as C,I as H,z as E}from"./index-DgVFOuIu.js";import{u as J,a as K}from"./testService-B9g0yUeR.js";import{Q as N}from"./Question-DJVAB3JS.js";import{A as W}from"./AppContainer-B7WmBWY1.js";import"./firestore-CKAN35Ge.js";import"./Breadcrumb-0WoaLxXW.js";const X=M({__name:"CreateQuestionView",props:{test_id:{type:String,required:!0}},setup(d,{expose:s}){s();const c=O(),{showMessage:e}=D(),{auth:p}=U(),{getTest:v}=J(),{addQuestion:i}=K(),Q=a(""),b=a(""),T=a(N.Text),f=a(0),_=a(!1),l=a(!1),y=a([]),k=B(()=>{const o={};return _.value&&(b.value===""&&(o.text="Question required"),typeof f.value=="string"&&(o.position="The position must be a number")),o}),S=F(p,async()=>{try{const o=await v(d.test_id);if(!o){e("failure","Test Not Found.");return}Q.value=o.name}catch{e("failure","Error loading test.")}finally{}}),h=[];P(()=>{document.querySelectorAll(".app-main .label-info").forEach(A=>{h.push(new j(A,{container:"body",placement:"right",html:!0,trigger:"click"}))})}),z(()=>{h.forEach(o=>o.dispose()),S()});async function V(){if(!l.value){if(l.value=!0,_.value=!0,Object.keys(k.value).length>0){l.value=!1;return}try{await i(d.test_id,{text:b.value,max_points:0,type:T.value,position:Number(f.value)}),y.value=[],c.push({name:"edit-test",params:{test_id:d.test_id},query:{sF:0}})}catch(o){y.value=["Server Error: "+o.code]}finally{l.value=!1}}}const q={router:c,showMessage:e,auth:p,getTest:v,addQuestion:i,testName:Q,text:b,type:T,position:f,submitted:_,submitting:l,serverErrors:y,errors:k,onAuthEventDispose:S,popOvers:h,createQuestion:V,get QuestionType(){return N},AppContainer:W};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}}),Y={class:"app-main"},Z={class:"question-form"},$={key:0,class:"alert alert-danger",role:"alert"},ee={class:"mb-3 test-name"},te={class:"mb-3"},se=["disabled"],oe={key:0,class:"invalid-feedback is-invalid"},ie={class:"mb-3"},ne=["disabled"],re=["value"],ae=["value"],le=["value"],ue=["value"],de={key:0,class:"invalid-feedback is-invalid"},ce={class:"mb-3"},me=["disabled"],pe={key:0,class:"invalid-feedback is-invalid"},ve=["disabled"];function be(d,s,c,e,p,v){return n(),L(e.AppContainer,{test_id:c.test_id},{default:R(()=>[t("div",Y,[t("div",Z,[s[7]||(s[7]=t("div",{class:"question-form-title mb-4"},"Create Question",-1)),e.serverErrors.length?(n(),r("div",$,[t("ul",null,[(n(!0),r(g,null,G(e.serverErrors,i=>(n(),r("li",{key:i},u(i),1))),128))])])):m("",!0),t("div",ee,u(e.testName),1),t("div",te,[s[3]||(s[3]=t("label",{for:"question-input-text",class:"form-label"},"Question",-1)),x(t("input",{type:"text",class:C(["form-control",{"is-invalid":e.errors.text}]),id:"question-input-text","onUpdate:modelValue":s[0]||(s[0]=i=>e.text=i),disabled:e.submitting},null,10,se),[[w,e.text]]),e.errors.text?(n(),r("div",oe,u(e.errors.text),1)):m("",!0)]),t("div",ie,[s[4]||(s[4]=t("label",{for:"question-input-type",class:"form-label"},"Question Type",-1)),x(t("select",{class:C(["form-select",{"is-invalid":e.errors.type}]),id:"question-input-type","onUpdate:modelValue":s[1]||(s[1]=i=>e.type=i),disabled:e.submitting},[t("option",{value:e.QuestionType.Text},"Text",8,re),t("option",{value:e.QuestionType.MultipleChoice},"Multiple Choice",8,ae),t("option",{value:e.QuestionType.Number},"Number",8,le),t("option",{value:e.QuestionType.SingleChoice},"Single Choice",8,ue)],10,ne),[[H,e.type]]),e.errors.type?(n(),r("div",de,u(e.errors.type),1)):m("",!0)]),t("div",ce,[s[5]||(s[5]=t("label",{for:"question-input-position",class:"form-label"},"Position",-1)),s[6]||(s[6]=t("span",{class:"label-info","data-bs-content":"The position of the question in the test."},[t("i",{class:"bi bi-question-circle-fill"})],-1)),x(t("input",{type:"number",class:C(["form-control",{"is-invalid":e.errors.position}]),id:"question-input-position","onUpdate:modelValue":s[2]||(s[2]=i=>e.position=i),disabled:e.submitting},null,10,me),[[w,e.position]]),e.errors.position?(n(),r("div",pe,u(e.errors.position),1)):m("",!0)]),t("button",{type:"button",class:"btn btn-primary",onClick:e.createQuestion,disabled:e.submitting},[e.submitting?(n(),r(g,{key:1},[E("Creating ...")],64)):(n(),r(g,{key:0},[E("Create")],64))],8,ve)])])]),_:1},8,["test_id"])}const Ce=I(X,[["render",be],["__scopeId","data-v-9847bc67"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/CreateQuestionView.vue"]]);export{Ce as default};
