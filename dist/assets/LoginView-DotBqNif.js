import{d as I,u as q,a as D,v as N,r as p,x as z,o as O,e as P,f as R,w,y as W,z as j,g as l,h as e,t as i,i as n,j as u,F as _,k as F,p as f,A as L,B as U,m as x,C as m,l as G,D as T,s as M}from"./index-D9eu1wvy.js";import{v as $}from"./utils-DltTuOhC.js";import{_ as H}from"./AppContainer.vue_vue_type_script_setup_true_lang-Ci2WOSVt.js";import"./Question-DJVAB3JS.js";const J={class:"app-main"},K={class:"sign-container"},Q={class:"login-form"},X={class:"login-form-title mb-4"},Y={key:0,class:"alert alert-danger",role:"alert"},Z={class:"mb-3"},ee={for:"login-input-email",class:"form-label"},se={class:"input-group"},ae=["disabled"],te={key:0,class:"invalid-feedback is-invalid"},ie={class:"mb-3"},oe={for:"login-input-password",class:"form-label"},le={class:"input-group"},ne=["disabled"],re={key:0,class:"invalid-feedback is-invalid"},ue=["disabled"],de={class:"signup-parties"},ce={class:"signup-link"},ve=I({__name:"LoginView",setup(pe){const b=W(),{t:a}=q(),{auth:h,isAnonymous:C,signUpWithGoogle:E}=D(),{spaceLabel:y}=N(),c=p(""),g=p(""),k=p(!1),o=p(!1),v=p([]),r=z(()=>{const t={};return k.value&&(c.value===""?t.email=a("Email required"):$(c.value)||(t.email=a("Invalid email")),g.value===""&&(t.password=a("Password required"))),t}),S=O(h,t=>{C(t)||b.push({name:"home"})});P(()=>{S()});async function V(){if(!o.value){if(o.value=!0,k.value=!0,Object.keys(r.value).length>0){o.value=!1;return}try{await T(h,c.value,g.value),v.value=[]}catch(t){v.value=[a("Server Error")+y.value+": "+t.code]}finally{o.value=!1}}}async function A(){try{await E(),b.push({name:"home"})}catch(t){v.value=[a("Server Error")+y.value+": "+t.code]}}return(t,s)=>{const B=j("RouterLink");return l(),R(H,null,{default:w(()=>[e("div",J,[e("div",K,[e("div",Q,[e("div",X,i(n(a)("Login")),1),v.value.length?(l(),u("div",Y,[e("ul",null,[(l(!0),u(_,null,F(v.value,d=>(l(),u("li",{key:d},i(d),1))),128))])])):f("",!0),e("div",Z,[e("label",ee,i(n(a)("Email")),1),e("div",se,[s[2]||(s[2]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-at"})],-1)),L(e("input",{type:"email",class:x(["form-control",{"is-invalid":r.value.email}]),id:"login-input-email","onUpdate:modelValue":s[0]||(s[0]=d=>c.value=d),disabled:o.value,"aria-required":""},null,10,ae),[[U,c.value]]),r.value.email?(l(),u("div",te,i(r.value.email),1)):f("",!0)])]),e("div",ie,[e("label",oe,i(n(a)("Password")),1),e("div",le,[s[3]||(s[3]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),L(e("input",{type:"password",class:x(["form-control",{"is-invalid":r.value.password}]),id:"login-input-password","onUpdate:modelValue":s[1]||(s[1]=d=>g.value=d),disabled:o.value,"aria-required":""},null,10,ne),[[U,g.value]]),r.value.password?(l(),u("div",re,i(r.value.password),1)):f("",!0)])]),e("button",{type:"button",class:"btn btn-primary",onClick:V,disabled:o.value},[o.value?(l(),u(_,{key:1},[m(i(n(a)("Logging In"))+" ...",1)],64)):(l(),u(_,{key:0},[m(i(n(a)("Login")),1)],64))],8,ue)]),e("div",de,[m(i(n(a)("Or Sign Up Using")),1),s[5]||(s[5]=e("br",null,null,-1)),e("button",{type:"button",class:"btn btn-danger google-auth",onClick:A},s[4]||(s[4]=[e("i",{class:"bi bi-google"},null,-1)]))]),e("div",ce,[m(i(n(a)("Or Sign Up Using")),1),s[6]||(s[6]=e("br",null,null,-1)),G(B,{to:{name:"register"}},{default:w(()=>[m(i(n(a)("Sign Up")),1)]),_:1})])])])]),_:1})}}}),be=M(ve,[["__scopeId","data-v-1610fabb"]]);export{be as default};
