import{s as g,u as D,b as L,H as k,I as M,r as b,x as i,c as S,e as x}from"./index-CEw6Ur-o.js";import{u as E}from"./testService-F-kZAI4C.js";import{a as I}from"./utils-BFrGjP34.js";function P(e){const c=g(),{locale:u,t}=D(),{showMessage:o,startLoading:l,endLoading:d}=L(),{deleteTest:f}=E(),{confirm:p}=k(),n=M("test-description"),s=b(!1),m=i(()=>s.value?e.description.replace(/\n/g,"<br />"):e.description.replace(/\n/g,"")),v=i(()=>{if(!e)return"";const r=e.updated_at.toDate();return I(r,u.value)});S(()=>{n.value&&n.value.addEventListener("click",a)}),x(()=>{n.value&&n.value.removeEventListener("click",a)});function a(){s.value=!0}function T(){e&&p(t('Are you sure you want to delete this test: "{name}"?',{name:e.name}),t("Delete"),y)}async function y(){if(e!=null&&e.id)try{l(),await f(e.id),o("success",t("Test deleted with success."))}catch{o("failure",t("Test can not be deleted."))}finally{d()}}async function h(){const r=c.resolve({name:"test-portal",params:{test_id:e.id}}),w=location.origin+r.fullPath;try{await navigator.clipboard.writeText(w),o("success",t("Test link copied!"))}catch{o("failure",t("Sorry, Test link couldn't be copied!"))}}return{showMore:s,description:m,updatedAt:v,confirmTestdeletion:T,copyTestLink:h}}export{P as u};
