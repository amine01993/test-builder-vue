const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TestItem-Cjbm0-Mx.js","assets/index-CYSG3gem.js","assets/index-Comk1Z5G.css","assets/testItem-D2Q1l-Zt.js","assets/testService-Cnbo4ErZ.js","assets/firestore-PMUsJiSA.js","assets/Question-DJVAB3JS.js","assets/utils-DltTuOhC.js","assets/TestItemD-VkULJQVk.js"])))=>i.map(i=>d[i]);
import{d as B,u as M,v as P,b as R,a as q,r as z,o as F,c as O,e as j,n as H,f as _,w,g as s,h as t,l as k,C as b,t as a,i as e,R as Q,j as r,F as d,p as g,k as p,m as U,q as L,_ as C,s as $}from"./index-CYSG3gem.js";import{u as G}from"./testService-Cnbo4ErZ.js";import{_ as J}from"./AppContainer.vue_vue_type_script_setup_true_lang-6SrFR88_.js";import"./firestore-PMUsJiSA.js";import"./Question-DJVAB3JS.js";const K={class:"app-main"},W={class:"test-actions"},X={key:0,class:"test-info"},Y={class:"test-info-label"},Z={key:1,class:"placeholder-wave"},ee={class:"test-list"},te={scope:"col"},se={scope:"col"},oe={scope:"col"},ae={scope:"col"},ne={scope:"col"},le={scope:"col"},re={scope:"col"},ce=B({__name:"TestsView",setup(ie){const{t:o}=M(),{spaceLabel:E}=P(),{isDesktop:S,showMessage:v}=R(),{auth:V,user:x}=q(),{testCount:c,tests:n,loadTestCount:A,loadTests:D,loadMoreTests:I}=G(),h=z(!1);let i=null;const m=L(()=>C(()=>import("./TestItem-Cjbm0-Mx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),f=L(()=>C(()=>import("./TestItemD-VkULJQVk.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]))),N=F(V,async()=>{try{await Promise.all([A(),D()]),i||(i=document.querySelector(".tests-loader"),u())}catch(y){console.log("TestsView",y),v("failure",o("Error loading tests."))}});O(()=>{document.addEventListener("scroll",u),i||(i=document.querySelector(".tests-loader"),u())}),j(()=>{N(),document.removeEventListener("scroll",u)});async function u(){if(i&&!h.value&&i.getBoundingClientRect().top<window.innerHeight&&x.value){h.value=!0;try{await I(),await H(),i=document.querySelector(".tests-loader"),h.value=!1,u()}catch{v("failure",o("Error loading more tests."))}finally{h.value=!1}}}return(y,T)=>(s(),_(J,null,{default:w(()=>[t("div",K,[t("div",W,[k(e(Q),{to:{name:"create-test"},class:"btn btn-warning create-test"},{default:w(()=>[b(a(e(o)("Create New Test")),1)]),_:1})]),e(c)!==0?(s(),r("div",X,[e(c)?(s(),r(d,{key:0},[t("span",Y,a(e(o)("Total number of tests"))+a(e(E))+":",1),b(" "+a(e(c)),1)],64)):(s(),r("div",Z,T[0]||(T[0]=[t("div",{class:"placeholder placeholder-lg col-8 bg-secondary"},null,-1)])))])):g("",!0),t("div",ee,[e(S)?(s(),r("table",{key:1,class:U(["table",{loading:!e(n)}])},[t("thead",null,[t("tr",null,[t("th",te,a(e(o)("Test")),1),t("th",se,a(e(o)("Description")),1),t("th",oe,a(e(o)("Max Points")),1),t("th",ae,a(e(o)("Time Limit")),1),t("th",ne,a(e(o)("Nbr of Questions")),1),t("th",le,a(e(o)("Last updated at")),1),t("th",re,a(e(o)("Actions")),1)])]),t("tbody",null,[e(n)?(s(!0),r(d,{key:0},p(e(n),l=>(s(),_(e(f),{test:l,key:l.id},null,8,["test"]))),128)):(s(),r(d,{key:1},p(5,l=>k(e(f),{key:"test-placeholder-"+l})),64)),e(c)&&e(n)&&e(n).length<e(c)?(s(),_(e(f),{key:"test-placeholder-loading",class:"tests-loader"})):g("",!0)])],2)):(s(),r(d,{key:0},[e(n)?(s(!0),r(d,{key:0},p(e(n),l=>(s(),_(e(m),{test:l,key:l.id},null,8,["test"]))),128)):(s(),r(d,{key:1},p([0,1,2],l=>k(e(m),{key:"test-placeholder-"+l})),64)),e(c)&&e(n)&&e(n).length<e(c)?(s(),_(e(m),{key:"test-placeholder-loading",class:"tests-loader"})):g("",!0)],64))])])]),_:1}))}}),me=$(ce,[["__scopeId","data-v-7f7b881f"]]);export{me as default};
