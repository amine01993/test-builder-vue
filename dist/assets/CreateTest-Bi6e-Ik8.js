import{d as w,u as V,b as A,r as n,e as O,x as U,g as q,_ as j,c as a,a as L,i,F as v,j as B,k as m,w as f,v as p,n as _,t as d,l as D,o}from"./index-B_-_E6VX.js";import{P,A as R,a as F}from"./AppMenu-SSwb1Ea-.js";import{u as H,T as E}from"./testService-hoBBazVx.js";const z=w({__name:"CreateTest",setup(M,{expose:t}){t();const x=V(),{user:e}=A(),{addTest:g}=H(),c=n(""),r=n(""),u=n(0),b=n(0),y=n(!1),l=n(!1),T=n([]),h=O(()=>{const s={};return y.value&&(c.value===""&&(s.name="Name required"),typeof u.value=="string"?s.maxScore="Maximum score must be a number":u.value<0&&(s.maxScore="Maximum score can't be a negatif number"),typeof b.value=="string"?s.timeLimit="The time limit must be a number":b.value<0&&(s.timeLimit="The time limit can't be a negatif number")),s}),k=[];U(()=>{document.querySelectorAll(".app-main .label-info").forEach(S=>{k.push(new P(S,{container:"body",placement:"right",html:!0,trigger:"click"}))})}),q(()=>{k.forEach(s=>s.dispose())});async function N(){if(!l.value){if(l.value=!0,y.value=!0,Object.keys(h.value).length>0){l.value=!1;return}try{const s=new Date,S=await g({name:c.value,description:r.value,max_points:Number(u.value),time_limit:Number(b.value),user_id:e.value.uid,created_at:E.fromDate(s),updated_at:E.fromDate(s)});console.log("createTest.testRef",S),T.value=[],x.push({name:"tests"})}catch(s){console.log("login.error",s),T.value=["Server Error: "+s.code]}finally{l.value=!1}}}const C={router:x,user:e,addTest:g,name:c,description:r,maxScore:u,timeLimit:b,submitted:y,submitting:l,serverErrors:T,errors:h,popOvers:k,createTest:N,AppHeader:R,AppMenu:F};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),I={class:"app-main"},G={class:"test-form"},J={key:0,class:"alert alert-danger",role:"alert"},K={class:"mb-3"},Q=["disabled"],W={key:0,class:"invalid-feedback is-invalid"},X={class:"mb-3"},Y=["disabled"],Z={key:0,class:"invalid-feedback is-invalid"},$={class:"mb-3"},ee=["disabled"],te={key:0,class:"invalid-feedback is-invalid"},ie={class:"mb-3"},se=["disabled"],re={key:0,class:"invalid-feedback is-invalid"},ae=["disabled"];function oe(M,t,x,e,g,c){return o(),a(v,null,[L(e.AppHeader),L(e.AppMenu),i("div",I,[i("div",G,[t[10]||(t[10]=i("div",{class:"test-form-title mb-4"},"Create New Test",-1)),e.serverErrors.length?(o(),a("div",J,[i("ul",null,[(o(!0),a(v,null,B(e.serverErrors,r=>(o(),a("li",{key:r},d(r),1))),128))])])):m("",!0),i("div",K,[t[4]||(t[4]=i("label",{for:"test-input-name",class:"form-label"},"Name",-1)),f(i("input",{type:"text",class:_(["form-control",{"is-invalid":e.errors.name}]),id:"test-input-name","onUpdate:modelValue":t[0]||(t[0]=r=>e.name=r),disabled:e.submitting},null,10,Q),[[p,e.name]]),e.errors.name?(o(),a("div",W,d(e.errors.name),1)):m("",!0)]),i("div",X,[t[5]||(t[5]=i("label",{for:"test-input-description",class:"form-label"},"Description",-1)),f(i("textarea",{class:_(["form-control",{"is-invalid":e.errors.description}]),id:"test-input-description","onUpdate:modelValue":t[1]||(t[1]=r=>e.description=r),rows:"3",disabled:e.submitting},null,10,Y),[[p,e.description]]),e.errors.description?(o(),a("div",Z,d(e.errors.description),1)):m("",!0)]),i("div",$,[t[6]||(t[6]=i("label",{for:"test-input-maxscore",class:"form-label"},"Maximum Score",-1)),t[7]||(t[7]=i("span",{class:"label-info","data-bs-content":"The Maximum number of points a test taker can achieve.<br>0 = no Max Score"},[i("i",{class:"bi bi-question-circle-fill"})],-1)),f(i("input",{type:"number",class:_(["form-control",{"is-invalid":e.errors.maxScore}]),id:"test-input-maxscore","onUpdate:modelValue":t[2]||(t[2]=r=>e.maxScore=r),disabled:e.submitting},null,10,ee),[[p,e.maxScore]]),e.errors.maxScore?(o(),a("div",te,d(e.errors.maxScore),1)):m("",!0)]),i("div",ie,[t[8]||(t[8]=i("label",{for:"test-input-timelimit",class:"form-label"},"Time limit",-1)),t[9]||(t[9]=i("span",{class:"label-info","data-bs-content":"The test Time Limit is in seconds.<br>0 = no Time Limit"},[i("i",{class:"bi bi-question-circle-fill"})],-1)),f(i("input",{type:"number",class:_(["form-control",{"is-invalid":e.errors.timeLimit}]),id:"test-input-timelimit","onUpdate:modelValue":t[3]||(t[3]=r=>e.timeLimit=r),disabled:e.submitting},null,10,se),[[p,e.timeLimit]]),e.errors.timeLimit?(o(),a("div",re,d(e.errors.timeLimit),1)):m("",!0)]),i("button",{type:"button",class:"btn btn-primary",onClick:e.createTest,disabled:e.submitting},[e.submitting?(o(),a(v,{key:1},[D("Creating ...")],64)):(o(),a(v,{key:0},[D("Create")],64))],8,ae)])])],64)}const de=j(z,[["render",oe],["__scopeId","data-v-5488c6d5"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/CreateTest.vue"]]);export{de as default};
