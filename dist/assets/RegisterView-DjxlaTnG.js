import{d as L,u as M,b as q,r as d,e as D,f as O,g as W,E as j,p as B,_ as F,h as H,c as a,a as S,i as e,F as c,j as V,k as b,w as P,v as C,n as U,t as w,l as p,m as T,o as n}from"./index-B_-_E6VX.js";import{u as z,A as J,a as K}from"./AppMenu-SSwb1Ea-.js";const Q=L({__name:"RegisterView",setup(R,{expose:s}){s();const u=M(),{auth:i,user:_,isAnonymous:h,signUpWithGoogle:v}=q(),{validateEmail:o}=z(),g=d(""),f=d(""),A=d(""),m=d(!1);let t=d(null);const k=d(!1),y=d([]),E=D(()=>{const r={};if(!k.value)return r;if(g.value===""?r.email="Email required":o(g.value)||(r.email="Invalid email"),f.value==="")r.password=["Password required"];else if(t.value&&!t.value.isValid){console.log("validationStatus",t);const l=[];t.value.containsLowercaseLetter!==!0&&l.push("Require lowercase character"),t.value.containsNonAlphanumericCharacter!==!0&&l.push("Require special character"),t.value.containsNumericCharacter!==!0&&l.push("Require numeric character"),t.value.meetsMinPasswordLength!==!0&&l.push("Minimum password length is 7"),t.value.meetsMaxPasswordLength!==!0&&l.push("Password too long"),r.password=l}else f.value!==A.value&&(r.confirmPass="Password mismatch");return r}),x=O(i,r=>{console.log("Registerview onAuthStateChanged",r),h(r)||u.push({name:"home"})});W(()=>{x()});async function I(){if(!m.value){if(m.value=!0,k.value=!0,Object.keys(E.value).length>0){m.value=!1;return}try{const r=j.credential(g.value,f.value),l=await B(_.value,r);console.log("register.userCredential",l),u.push({name:"home"})}catch(r){console.log("register.error"),y.value=["Server Error: "+r.code]}finally{m.value=!1}}}async function G(){try{await v(),u.push({name:"home"})}catch(r){console.log("register.error"),y.value=["Server Error: "+r.code]}}const N={router:u,auth:i,user:_,isAnonymous:h,signUpWithGoogle:v,validateEmail:o,email:g,password:f,confirmPass:A,submitting:m,get validationStatus(){return t},set validationStatus(r){t=r},submitted:k,serverErrors:y,errors:E,onAuthEventDispose:x,register:I,signUpWithG:G,AppHeader:J,AppMenu:K};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),X={class:"app-main"},Y={class:"sign-container"},Z={class:"login-form"},$={key:0,class:"alert alert-danger",role:"alert"},ss={class:"mb-3"},es={class:"input-group"},is=["disabled"],rs={key:0,class:"invalid-feedback is-invalid"},os={class:"mb-3"},ts={class:"input-group"},as=["disabled"],ns={class:"mb-3"},ls={class:"input-group"},ds=["disabled"],us={key:0,class:"invalid-feedback is-invalid"},ms=["disabled"],cs={class:"signup-link"};function ps(R,s,u,i,_,h){const v=H("RouterLink");return n(),a(c,null,[S(i.AppHeader),S(i.AppMenu),e("div",X,[e("div",Y,[e("div",Z,[s[9]||(s[9]=e("div",{class:"login-form-title mb-4"},"Sign Up",-1)),i.serverErrors.length?(n(),a("div",$,[e("ul",null,[(n(!0),a(c,null,V(i.serverErrors,o=>(n(),a("li",{key:o},w(o),1))),128))])])):b("",!0),e("div",ss,[s[4]||(s[4]=e("label",{for:"login-input-email",class:"form-label"},"Email",-1)),e("div",es,[s[3]||(s[3]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-at"})],-1)),P(e("input",{type:"email",class:U(["form-control",{"is-invalid":i.errors.email}]),id:"login-input-email","onUpdate:modelValue":s[0]||(s[0]=o=>i.email=o),disabled:i.submitting},null,10,is),[[C,i.email]]),i.errors.email?(n(),a("div",rs,w(i.errors.email),1)):b("",!0)])]),e("div",os,[s[6]||(s[6]=e("label",{for:"login-input-password",class:"form-label"},"Password",-1)),e("div",ts,[s[5]||(s[5]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),P(e("input",{type:"password",class:U(["form-control",{"is-invalid":i.errors.password}]),id:"login-input-password","onUpdate:modelValue":s[1]||(s[1]=o=>i.password=o),disabled:i.submitting},null,10,as),[[C,i.password]]),i.errors.password?(n(!0),a(c,{key:0},V(i.errors.password,o=>(n(),a("div",{class:"invalid-feedback is-invalid",key:o},w(o),1))),128)):b("",!0)])]),e("div",ns,[s[8]||(s[8]=e("label",{for:"login-input-password-confirm",class:"form-label"},"Confirm Password",-1)),e("div",ls,[s[7]||(s[7]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),P(e("input",{type:"password",class:U(["form-control",{"is-invalid":i.errors.confirmPass}]),id:"login-input-password-confirm","onUpdate:modelValue":s[2]||(s[2]=o=>i.confirmPass=o),disabled:i.submitting},null,10,ds),[[C,i.confirmPass]]),i.errors.confirmPass?(n(),a("div",us,w(i.errors.confirmPass),1)):b("",!0)])]),e("button",{type:"button",class:"btn btn-primary",onClick:i.register,disabled:i.submitting},[i.submitting?(n(),a(c,{key:1},[p("SIGNING UP ...")],64)):(n(),a(c,{key:0},[p("SIGN UP")],64))],8,ms)]),e("div",{class:"signup-parties"},[s[11]||(s[11]=p(" Or Sign Up Using ")),s[12]||(s[12]=e("br",null,null,-1)),e("button",{type:"button",class:"btn btn-danger google-auth",onClick:i.signUpWithG},s[10]||(s[10]=[e("i",{class:"bi bi-google"},null,-1)]))]),e("div",cs,[s[14]||(s[14]=p(" Or Sign In Using ")),s[15]||(s[15]=e("br",null,null,-1)),S(v,{to:{name:"login"}},{default:T(()=>s[13]||(s[13]=[p("SIGN IN")])),_:1})])])])],64)}const fs=F(Q,[["render",ps],["__scopeId","data-v-bf0653ef"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/RegisterView.vue"]]);export{fs as default};
