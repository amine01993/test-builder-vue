import{d as N,u as S,v as q,b as B,r as c,x as M,c as O,P as U,e as D,f as j,w as z,y as A,g as n,h as e,t as l,i as d,j as u,F as _,k as F,p as b,C as h,A as y,B as k,m as T,s as I}from"./index-CYSG3gem.js";import{u as P}from"./testService-Cnbo4ErZ.js";import{_ as R}from"./AppContainer.vue_vue_type_script_setup_true_lang-6SrFR88_.js";import"./firestore-PMUsJiSA.js";import"./Question-DJVAB3JS.js";const $={class:"app-main"},G={class:"test-form"},H={class:"test-form-title mb-4"},J={key:0,class:"alert alert-danger",role:"alert"},K={class:"mb-3"},Q={for:"test-input-name",class:"form-label"},W=["disabled"],X={key:0,class:"invalid-feedback is-invalid"},Y={class:"mb-3"},Z={for:"test-input-description",class:"form-label"},ee=["disabled"],te={key:0,class:"invalid-feedback is-invalid"},se={class:"mb-3"},ie={for:"test-input-timelimit",class:"form-label"},ae=["data-bs-content"],le=["disabled"],oe={key:0,class:"invalid-feedback is-invalid"},ne=["disabled"],re=N({__name:"CreateTestView",setup(ue){const L=A(),{t}=S(),{spaceLabel:w}=q(),{showMessage:x}=B(),{addTest:V}=P(),v=c(""),f=c(""),m=c(0),g=c(!1),o=c(!1),p=c([]),a=M(()=>{const i={};return g.value&&(v.value===""&&(i.name=t("Name required")),typeof m.value=="string"?i.timeLimit=t("The time limit must be a number"):m.value<0&&(i.timeLimit=t("The time limit can't be a negatif number"))),i}),C=[];O(()=>{document.querySelectorAll(".app-main .label-info").forEach(s=>{C.push(new U(s,{container:"body",placement:"right",html:!0,trigger:"click"}))})}),D(()=>{C.forEach(i=>i.dispose())});async function E(){if(!o.value){if(o.value=!0,g.value=!0,Object.keys(a.value).length>0){o.value=!1;return}try{await V({name:v.value,description:f.value,max_points:0,questionCount:0,time_limit:Number(m.value)}),p.value=[],x("success",t("Test created with success.")),L.push({name:"tests"})}catch(i){p.value=[t("Server Error")+w.value+": "+i.code]}finally{o.value=!1}}}return(i,s)=>(n(),j(R,null,{default:z(()=>[e("div",$,[e("div",G,[e("div",H,l(d(t)("Create New Test")),1),p.value.length?(n(),u("div",J,[e("ul",null,[(n(!0),u(_,null,F(p.value,r=>(n(),u("li",{key:r},l(r),1))),128))])])):b("",!0),e("div",K,[e("label",Q,[h(l(d(t)("Name")),1),s[3]||(s[3]=e("span",{class:"required"},"*",-1))]),y(e("input",{type:"text",class:T(["form-control",{"is-invalid":a.value.name}]),id:"test-input-name","onUpdate:modelValue":s[0]||(s[0]=r=>v.value=r),disabled:o.value,"aria-required":""},null,10,W),[[k,v.value]]),a.value.name?(n(),u("div",X,l(a.value.name),1)):b("",!0)]),e("div",Y,[e("label",Z,l(d(t)("Description")),1),y(e("textarea",{class:T(["form-control",{"is-invalid":a.value.description}]),id:"test-input-description","onUpdate:modelValue":s[1]||(s[1]=r=>f.value=r),rows:"3",disabled:o.value},null,10,ee),[[k,f.value]]),a.value.description?(n(),u("div",te,l(a.value.description),1)):b("",!0)]),e("div",se,[e("label",ie,l(d(t)("Time Limit")),1),e("span",{class:"label-info","data-bs-content":d(t)("The test Time Limit is in seconds.<br>0 = no Time Limit")},s[4]||(s[4]=[e("i",{class:"bi bi-question-circle-fill"},null,-1)]),8,ae),y(e("input",{type:"number",class:T(["form-control",{"is-invalid":a.value.timeLimit}]),id:"test-input-timelimit","onUpdate:modelValue":s[2]||(s[2]=r=>m.value=r),disabled:o.value},null,10,le),[[k,m.value]]),a.value.timeLimit?(n(),u("div",oe,l(a.value.timeLimit),1)):b("",!0)]),e("button",{type:"button",class:"btn btn-primary",onClick:E,disabled:o.value},[o.value?(n(),u(_,{key:1},[h(l(d(t)("Creating"))+" ...",1)],64)):(n(),u(_,{key:0},[h(l(d(t)("Create")),1)],64))],8,ne)])])]),_:1}))}}),be=I(re,[["__scopeId","data-v-3048bfbc"]]);export{be as default};
