import{d as S,s as N,u as O,v as q,r as l,x as A,c as B,P as D,e as U,g as j,h as P,w as z,i as a,j as t,t as o,k as n,F as h,l as F,q as m,A as y,B as g,p as k,C as w}from"./index-CEw6Ur-o.js";import{u as I}from"./testService-F-kZAI4C.js";import{A as M}from"./AppContainer-CrW-O1Ra.js";import"./firestore-O8Pw084e.js";import"./Question-DJVAB3JS.js";const R=S({__name:"CreateTestView",setup(x,{expose:s}){s();const u=N(),{t:e}=O(),{spaceLabel:_}=q(),{addTest:v}=I(),i=l(""),C=l(""),c=l(0),b=l(!1),d=l(!1),f=l([]),T=A(()=>{const r={};return b.value&&(i.value===""&&(r.name=e("Name required")),typeof c.value=="string"?r.timeLimit=e("The time limit must be a number"):c.value<0&&(r.timeLimit=e("The time limit can't be a negatif number"))),r}),p=[];B(()=>{document.querySelectorAll(".app-main .label-info").forEach(V=>{p.push(new D(V,{container:"body",placement:"right",html:!0,trigger:"click"}))})}),U(()=>{p.forEach(r=>r.dispose())});async function E(){if(!d.value){if(d.value=!0,b.value=!0,Object.keys(T.value).length>0){d.value=!1;return}try{await v({name:i.value,description:C.value,max_points:0,questionCount:0,time_limit:Number(c.value)}),f.value=[],u.push({name:"tests"})}catch(r){f.value=[e("Server Error")+_.value+": "+r.code]}finally{d.value=!1}}}const L={router:u,t:e,spaceLabel:_,addTest:v,name:i,description:C,timeLimit:c,submitted:b,submitting:d,serverErrors:f,errors:T,popOvers:p,createTest:E,AppContainer:M};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),G={class:"app-main"},H={class:"test-form"},J={class:"test-form-title mb-4"},K={key:0,class:"alert alert-danger",role:"alert"},Q={class:"mb-3"},W={for:"test-input-name",class:"form-label"},X=["disabled"],Y={key:0,class:"invalid-feedback is-invalid"},Z={class:"mb-3"},$={for:"test-input-description",class:"form-label"},ee=["disabled"],te={key:0,class:"invalid-feedback is-invalid"},ie={class:"mb-3"},se={for:"test-input-timelimit",class:"form-label"},re=["data-bs-content"],oe=["disabled"],ae={key:0,class:"invalid-feedback is-invalid"},ne=["disabled"];function le(x,s,u,e,_,v){return a(),P(e.AppContainer,null,{default:z(()=>[t("div",G,[t("div",H,[t("div",J,o(e.t("Create New Test")),1),e.serverErrors.length?(a(),n("div",K,[t("ul",null,[(a(!0),n(h,null,F(e.serverErrors,i=>(a(),n("li",{key:i},o(i),1))),128))])])):m("",!0),t("div",Q,[t("label",W,o(e.t("Name")),1),y(t("input",{type:"text",class:k(["form-control",{"is-invalid":e.errors.name}]),id:"test-input-name","onUpdate:modelValue":s[0]||(s[0]=i=>e.name=i),disabled:e.submitting},null,10,X),[[g,e.name]]),e.errors.name?(a(),n("div",Y,o(e.errors.name),1)):m("",!0)]),t("div",Z,[t("label",$,o(e.t("Description")),1),y(t("textarea",{class:k(["form-control",{"is-invalid":e.errors.description}]),id:"test-input-description","onUpdate:modelValue":s[1]||(s[1]=i=>e.description=i),rows:"3",disabled:e.submitting},null,10,ee),[[g,e.description]]),e.errors.description?(a(),n("div",te,o(e.errors.description),1)):m("",!0)]),t("div",ie,[t("label",se,o(e.t("Time Limit")),1),t("span",{class:"label-info","data-bs-content":e.t("The test Time Limit is in seconds.<br>0 = no Time Limit")},s[3]||(s[3]=[t("i",{class:"bi bi-question-circle-fill"},null,-1)]),8,re),y(t("input",{type:"number",class:k(["form-control",{"is-invalid":e.errors.timeLimit}]),id:"test-input-timelimit","onUpdate:modelValue":s[2]||(s[2]=i=>e.timeLimit=i),disabled:e.submitting},null,10,oe),[[g,e.timeLimit]]),e.errors.timeLimit?(a(),n("div",ae,o(e.errors.timeLimit),1)):m("",!0)]),t("button",{type:"button",class:"btn btn-primary",onClick:e.createTest,disabled:e.submitting},[e.submitting?(a(),n(h,{key:1},[w(o(e.t("Creating"))+" ...",1)],64)):(a(),n(h,{key:0},[w(o(e.t("Create")),1)],64))],8,ne)])])]),_:1})}const ve=j(R,[["render",le],["__scopeId","data-v-39099d43"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/CreateTestView.vue"]]);export{ve as default};
