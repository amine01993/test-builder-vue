import{d as L,u as q,r as u,b as G,e as M,f as B,c as l,a as h,g as e,F as p,h as S,i as f,w as _,v as k,n as y,t as g,j as m,k as D,l as O,p as W,E as j,q as F,m as T,o}from"./index-BVQELQFO.js";import{u as $,_ as z,a as H}from"./AppMenu.vue_vue_type_script_setup_true_lang-Dv5cL-QV.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"app-main"},Q={class:"sign-container"},X={class:"login-form"},Y={key:0,class:"alert alert-danger",role:"alert"},Z={class:"mb-3"},ss={class:"input-group"},es=["disabled"],as={key:0,class:"invalid-feedback is-invalid"},is={class:"mb-3"},ts={class:"input-group"},ls=["disabled"],os={class:"mb-3"},ns={class:"input-group"},rs=["disabled"],us={key:0,class:"invalid-feedback is-invalid"},ds=["disabled"],vs={class:"signup-link"},ps=L({__name:"RegisterView",setup(ms){const b=O(),{auth:P,user:U,isAnonymous:N,signUpWithGoogle:x}=q(),{validateEmail:E}=$(),v=u(""),d=u(""),w=u(""),n=u(!1);let r=u(null);const C=u(!1),c=u([]),t=G(()=>{const a={};if(!C.value)return a;if(v.value===""?a.email="Email required":E(v.value)||(a.email="Invalid email"),d.value==="")a.password=["Password required"];else if(r.value&&!r.value.isValid){console.log("validationStatus",r);const s=[];r.value.containsLowercaseLetter!==!0&&s.push("Require lowercase character"),r.value.containsNonAlphanumericCharacter!==!0&&s.push("Require special character"),r.value.containsNumericCharacter!==!0&&s.push("Require numeric character"),r.value.meetsMinPasswordLength!==!0&&s.push("Minimum password length is 7"),r.value.meetsMaxPasswordLength!==!0&&s.push("Password too long"),a.password=s}else d.value!==w.value&&(a.confirmPass="Password mismatch");return a}),V=M(P,a=>{console.log("Registerview onAuthStateChanged",a),N(a)||b.push({name:"home"})});B(()=>{V()});async function R(){if(!n.value){if(n.value=!0,r.value=await W(P,d.value),C.value=!0,Object.keys(t.value).length>0){n.value=!1;return}try{const a=j.credential(v.value,d.value),s=await F(U.value,a);console.log("register.userCredential",s),b.push({name:"home"})}catch(a){console.log("register.error"),c.value=["Server Error: "+a.code]}finally{n.value=!1}}}async function I(){try{await x(),b.push({name:"home"})}catch(a){console.log("register.error"),c.value=["Server Error: "+a.code]}}return(a,s)=>{const A=T("RouterLink");return o(),l(p,null,[h(z),h(H),e("div",K,[e("div",Q,[e("div",X,[s[9]||(s[9]=e("div",{class:"login-form-title mb-4"},"Sign Up",-1)),c.value.length?(o(),l("div",Y,[e("ul",null,[(o(!0),l(p,null,S(c.value,i=>(o(),l("li",{key:i},g(i),1))),128))])])):f("",!0),e("div",Z,[s[4]||(s[4]=e("label",{for:"login-input-email",class:"form-label"},"Email",-1)),e("div",ss,[s[3]||(s[3]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-at"})],-1)),_(e("input",{type:"email",class:y(["form-control",{"is-invalid":t.value.email}]),id:"login-input-email","onUpdate:modelValue":s[0]||(s[0]=i=>v.value=i),disabled:n.value},null,10,es),[[k,v.value]]),t.value.email?(o(),l("div",as,g(t.value.email),1)):f("",!0)])]),e("div",is,[s[6]||(s[6]=e("label",{for:"login-input-password",class:"form-label"},"Password",-1)),e("div",ts,[s[5]||(s[5]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),_(e("input",{type:"password",class:y(["form-control",{"is-invalid":t.value.password}]),id:"login-input-password","onUpdate:modelValue":s[1]||(s[1]=i=>d.value=i),disabled:n.value},null,10,ls),[[k,d.value]]),t.value.password?(o(!0),l(p,{key:0},S(t.value.password,i=>(o(),l("div",{class:"invalid-feedback is-invalid",key:i},g(i),1))),128)):f("",!0)])]),e("div",os,[s[8]||(s[8]=e("label",{for:"login-input-password-confirm",class:"form-label"},"Confirm Password",-1)),e("div",ns,[s[7]||(s[7]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),_(e("input",{type:"password",class:y(["form-control",{"is-invalid":t.value.confirmPass}]),id:"login-input-password-confirm","onUpdate:modelValue":s[2]||(s[2]=i=>w.value=i),disabled:n.value},null,10,rs),[[k,w.value]]),t.value.confirmPass?(o(),l("div",us,g(t.value.confirmPass),1)):f("",!0)])]),e("button",{type:"button",class:"btn btn-primary",onClick:R,disabled:n.value},[n.value?(o(),l(p,{key:1},[m("SIGNING UP ...")],64)):(o(),l(p,{key:0},[m("SIGN UP")],64))],8,ds)]),e("div",{class:"signup-parties"},[s[11]||(s[11]=m(" Or Sign Up Using ")),s[12]||(s[12]=e("br",null,null,-1)),e("button",{type:"button",class:"btn btn-danger google-auth",onClick:I},s[10]||(s[10]=[e("i",{class:"bi bi-google"},null,-1)]))]),e("div",vs,[s[14]||(s[14]=m(" Or Sign In Using ")),s[15]||(s[15]=e("br",null,null,-1)),h(A,{to:{name:"login"}},{default:D(()=>s[13]||(s[13]=[m("SIGN IN")])),_:1})])])])],64)}}}),bs=J(ps,[["__scopeId","data-v-1dfc379d"]]);export{bs as default};
