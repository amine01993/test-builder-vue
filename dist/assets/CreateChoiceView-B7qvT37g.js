import{d as O,u as P,b as L,a as j,v as z,r as d,x as I,o as R,c as $,P as G,e as H,f as J,w as K,y as W,g as u,h as e,t as i,i as a,j as c,F as q,k as X,p as _,C as x,A as y,ag as Y,m as g,B as M,ah as Z,s as ee}from"./index-CYSG3gem.js";import{a as te,b as se}from"./testService-Cnbo4ErZ.js";import{Q as N}from"./Question-DJVAB3JS.js";import{_ as oe}from"./AppContainer.vue_vue_type_script_setup_true_lang-6SrFR88_.js";import"./firestore-PMUsJiSA.js";const ie={class:"app-main"},ae={class:"choice-form"},ne={class:"choice-form-title mb-4"},le={key:0,class:"alert alert-danger",role:"alert"},re={class:"mb-3 question-text"},ue={class:"mb-3"},ce={for:"choice-input-text",class:"form-label"},de=["type","disabled"],ve={key:0,class:"invalid-feedback is-invalid"},pe={class:"mb-3"},me={for:"choice-input-pts",class:"form-label"},he=["disabled"],fe={key:0,class:"invalid-feedback is-invalid"},be={class:"mb-3"},_e={class:"form-check"},ye={class:"form-check-label",for:"choice-input-correctness"},Ce={class:"mb-3"},ke={for:"choice-input-position",class:"form-label"},qe=["data-bs-content"],xe=["disabled"],ge={key:0,class:"invalid-feedback is-invalid"},Se=["disabled"],we=O({__name:"CreateChoiceView",props:{test_id:{},question_id:{}},setup(v){const T=W(),{t:s}=P(),{showMessage:C}=L(),{auth:A}=j(),{spaceLabel:B}=z(),{question:p,loadQuestion:Q}=te(),{addChoice:U}=se(),m=d(""),h=d(0),k=d(!1),f=d(0),S=d(!1),r=d(!1),b=d([]),n=I(()=>{const o={};return S.value&&(m.value===""&&(o.text=s("Choice required")),typeof h.value=="string"&&(o.points=s("Max points must be a number")),typeof f.value=="string"&&(o.position=s("The position must be a number"))),o}),D=R(A,async()=>{try{if(await Q(v.test_id,v.question_id),!p.value){C("failure",s("Question Not Found."));return}}catch{C("failure",s("Error loading question."))}finally{}}),w=[];$(()=>{document.querySelectorAll(".app-main .label-info").forEach(t=>{w.push(new G(t,{container:"body",placement:"right",html:!0,trigger:"click"}))})}),H(()=>{w.forEach(o=>o.dispose()),D()});async function F(){var o;if(!r.value){if(r.value=!0,S.value=!0,Object.keys(n.value).length>0){r.value=!1;return}try{await U(v.test_id,v.question_id,{text:m.value,points:Number(h.value),is_correct:k.value,position:Number(f.value),question:{type:((o=p.value)==null?void 0:o.type)??N.Text}}),b.value=[],C("success",s("Choice created with success.")),T.push({name:"edit-question",params:{test_id:v.test_id,question_id:v.question_id},query:{sF:0}})}catch(t){b.value=[s("Server Error")+B.value+": "+t.code]}finally{r.value=!1}}}return(o,t)=>(u(),J(oe,{test_id:o.test_id,question_id:o.question_id},{default:K(()=>{var E,V;return[e("div",ie,[e("div",ae,[e("div",ne,i(a(s)("Create Choice")),1),b.value.length?(u(),c("div",le,[e("ul",null,[(u(!0),c(q,null,X(b.value,l=>(u(),c("li",{key:l},i(l),1))),128))])])):_("",!0),e("div",re,i((E=a(p))==null?void 0:E.text),1),e("div",ue,[e("label",ce,[x(i(a(s)("Choice")),1),t[4]||(t[4]=e("span",{class:"required"},"*",-1))]),y(e("input",{type:((V=a(p))==null?void 0:V.type)===a(N).Number?"number":"text",class:g(["form-control",{"is-invalid":n.value.text}]),id:"choice-input-text","onUpdate:modelValue":t[0]||(t[0]=l=>m.value=l),disabled:r.value,"aria-required":""},null,10,de),[[Y,m.value]]),n.value.text?(u(),c("div",ve,i(n.value.text),1)):_("",!0)]),e("div",pe,[e("label",me,i(a(s)("Points")),1),y(e("input",{type:"number",class:g(["form-control",{"is-invalid":n.value.points}]),id:"choice-input-pts","onUpdate:modelValue":t[1]||(t[1]=l=>h.value=l),disabled:r.value},null,10,he),[[M,h.value]]),n.value.points?(u(),c("div",fe,i(n.value.points),1)):_("",!0)]),e("div",be,[e("div",_e,[y(e("input",{class:"form-check-input",type:"checkbox",id:"choice-input-correctness","onUpdate:modelValue":t[2]||(t[2]=l=>k.value=l)},null,512),[[Z,k.value]]),e("label",ye,i(a(s)("Correct Choice")),1)])]),e("div",Ce,[e("label",ke,i(a(s)("Position")),1),e("span",{class:"label-info","data-bs-content":a(s)("The position of the choice in the question.")},t[5]||(t[5]=[e("i",{class:"bi bi-question-circle-fill"},null,-1)]),8,qe),y(e("input",{type:"number",class:g(["form-control",{"is-invalid":n.value.position}]),id:"choice-input-position","onUpdate:modelValue":t[3]||(t[3]=l=>f.value=l),disabled:r.value},null,10,xe),[[M,f.value]]),n.value.position?(u(),c("div",ge,i(n.value.position),1)):_("",!0)]),e("button",{type:"button",class:"btn btn-primary",onClick:F,disabled:r.value},[r.value?(u(),c(q,{key:1},[x(i(a(s)("Creating"))+" ...",1)],64)):(u(),c(q,{key:0},[x(i(a(s)("Create")),1)],64))],8,Se)])])]}),_:1},8,["test_id","question_id"]))}}),Ae=ee(we,[["__scopeId","data-v-d7f613a2"]]);export{Ae as default};
