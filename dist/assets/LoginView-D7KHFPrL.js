import{d as V,u as N,b as O,r as a,e as D,f as G,g as I,s as P,_ as M,h as W,c as i,a as f,i as s,F as S,j,k as b,w as U,v as A,n as E,t as w,l as _,m as B,o as t}from"./index-DGIsIOIk.js";import{u as R,A as q,a as F}from"./AppMenu-D159pOy6.js";const H=V({__name:"LoginView",setup(h,{expose:e}){e();const d=N(),{auth:o,isAnonymous:m,signUpWithGoogle:v}=O(),{validateEmail:u}=R(),n=a(""),g=a(""),c=a(!1),l=a(!1),p=a([]),y=D(()=>{const r={};return c.value&&(n.value===""?r.email="Email required":u(n.value)||(r.email="Invalid email"),g.value===""&&(r.password="Password required")),r}),k=G(o,r=>{console.log("Loginview onAuthStateChanged",r),m(r)||d.push({name:"home"})});I(()=>{k()});async function x(){if(!l.value){if(l.value=!0,c.value=!0,Object.keys(y.value).length>0){l.value=!0;return}try{const r=await P(o,n.value,g.value);console.log("login.userCredential",r),p.value=[]}catch(r){console.log("login.error",r),p.value=["Server Error: "+r.code]}finally{l.value=!1}}}async function L(){try{await v(),d.push({name:"home"})}catch(r){console.log("register.error"),p.value=["Server Error: "+r.code]}}const C={router:d,auth:o,isAnonymous:m,signUpWithGoogle:v,validateEmail:u,email:n,password:g,submitted:c,submitting:l,serverErrors:p,errors:y,onAuthEventDispose:k,login:x,signUpWithG:L,AppHeader:q,AppMenu:F};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),T={class:"app-main"},z={class:"sign-container"},J={class:"login-form"},K={key:0,class:"alert alert-danger",role:"alert"},Q={class:"mb-3"},X={class:"input-group"},Y={key:0,class:"invalid-feedback is-invalid"},Z={class:"mb-3"},$={class:"input-group"},ee={key:0,class:"invalid-feedback is-invalid"},se={class:"signup-link"};function oe(h,e,d,o,m,v){const u=W("RouterLink");return t(),i(S,null,[f(o.AppHeader),f(o.AppMenu),s("div",T,[s("div",z,[s("div",J,[e[6]||(e[6]=s("div",{class:"login-form-title mb-4"},"Login",-1)),o.serverErrors.length?(t(),i("div",K,[s("ul",null,[(t(!0),i(S,null,j(o.serverErrors,n=>(t(),i("li",{key:n},w(n),1))),128))])])):b("",!0),s("div",Q,[e[3]||(e[3]=s("label",{for:"login-input-email",class:"form-label"},"Email",-1)),s("div",X,[e[2]||(e[2]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-at"})],-1)),U(s("input",{type:"email",class:E(["form-control",{"is-invalid":o.errors.email}]),id:"login-input-email","onUpdate:modelValue":e[0]||(e[0]=n=>o.email=n)},null,2),[[A,o.email]]),o.errors.email?(t(),i("div",Y,w(o.errors.email),1)):b("",!0)])]),s("div",Z,[e[5]||(e[5]=s("label",{for:"login-input-password",class:"form-label"},"Password",-1)),s("div",$,[e[4]||(e[4]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-lock-fill"})],-1)),U(s("input",{type:"password",class:E(["form-control",{"is-invalid":o.errors.password}]),id:"login-input-password","onUpdate:modelValue":e[1]||(e[1]=n=>o.password=n)},null,2),[[A,o.password]]),o.errors.password?(t(),i("div",ee,w(o.errors.password),1)):b("",!0)])]),s("button",{type:"button",class:"btn btn-primary",onClick:o.login},"LOGIN")]),s("div",{class:"signup-parties"},[e[8]||(e[8]=_(" Or Sign Up Using ")),e[9]||(e[9]=s("br",null,null,-1)),s("button",{type:"button",class:"btn btn-danger google-auth",onClick:o.signUpWithG},e[7]||(e[7]=[s("i",{class:"bi bi-google"},null,-1)]))]),s("div",se,[e[11]||(e[11]=_(" Or Sign Up Using ")),e[12]||(e[12]=s("br",null,null,-1)),f(u,{to:{name:"register"}},{default:B(()=>e[10]||(e[10]=[_("SIGN UP")])),_:1})])])])],64)}const ie=M(H,[["render",oe],["__scopeId","data-v-45f5edd7"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/LoginView.vue"]]);export{ie as default};
