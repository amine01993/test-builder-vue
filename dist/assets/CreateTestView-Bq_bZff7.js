import{d as N,u as S,v as q,b as B,r as d,x as M,c as O,P as U,e as D,f as j,w as z,y as A,g as n,h as e,t as l,i as c,j as u,F as f,k as F,p as _,A as h,B as y,m as k,C,s as I}from"./index-D9eu1wvy.js";import{u as P}from"./testService-z9XHGfAc.js";import{_ as R}from"./AppContainer.vue_vue_type_script_setup_true_lang-Ci2WOSVt.js";import"./firestore-CkCHjU9t.js";import"./Question-DJVAB3JS.js";const $={class:"app-main"},G={class:"test-form"},H={class:"test-form-title mb-4"},J={key:0,class:"alert alert-danger",role:"alert"},K={class:"mb-3"},Q={for:"test-input-name",class:"form-label"},W=["disabled"],X={key:0,class:"invalid-feedback is-invalid"},Y={class:"mb-3"},Z={for:"test-input-description",class:"form-label"},ee=["disabled"],te={key:0,class:"invalid-feedback is-invalid"},se={class:"mb-3"},ie={for:"test-input-timelimit",class:"form-label"},ae=["data-bs-content"],le=["disabled"],oe={key:0,class:"invalid-feedback is-invalid"},ne=["disabled"],re=N({__name:"CreateTestView",setup(ue){const L=A(),{t}=S(),{spaceLabel:w}=q(),{showMessage:x}=B(),{addTest:V}=P(),v=d(""),b=d(""),m=d(0),T=d(!1),o=d(!1),p=d([]),i=M(()=>{const s={};return T.value&&(v.value===""&&(s.name=t("Name required")),typeof m.value=="string"?s.timeLimit=t("The time limit must be a number"):m.value<0&&(s.timeLimit=t("The time limit can't be a negatif number"))),s}),g=[];O(()=>{document.querySelectorAll(".app-main .label-info").forEach(a=>{g.push(new U(a,{container:"body",placement:"right",html:!0,trigger:"click"}))})}),D(()=>{g.forEach(s=>s.dispose())});async function E(){if(!o.value){if(o.value=!0,T.value=!0,Object.keys(i.value).length>0){o.value=!1;return}try{await V({name:v.value,description:b.value,max_points:0,questionCount:0,time_limit:Number(m.value)}),p.value=[],x("success",t("Test created with success.")),L.push({name:"tests"})}catch(s){p.value=[t("Server Error")+w.value+": "+s.code]}finally{o.value=!1}}}return(s,a)=>(n(),j(R,null,{default:z(()=>[e("div",$,[e("div",G,[e("div",H,l(c(t)("Create New Test")),1),p.value.length?(n(),u("div",J,[e("ul",null,[(n(!0),u(f,null,F(p.value,r=>(n(),u("li",{key:r},l(r),1))),128))])])):_("",!0),e("div",K,[e("label",Q,l(c(t)("Name")),1),h(e("input",{type:"text",class:k(["form-control",{"is-invalid":i.value.name}]),id:"test-input-name","onUpdate:modelValue":a[0]||(a[0]=r=>v.value=r),disabled:o.value,"aria-required":""},null,10,W),[[y,v.value]]),i.value.name?(n(),u("div",X,l(i.value.name),1)):_("",!0)]),e("div",Y,[e("label",Z,l(c(t)("Description")),1),h(e("textarea",{class:k(["form-control",{"is-invalid":i.value.description}]),id:"test-input-description","onUpdate:modelValue":a[1]||(a[1]=r=>b.value=r),rows:"3",disabled:o.value},null,10,ee),[[y,b.value]]),i.value.description?(n(),u("div",te,l(i.value.description),1)):_("",!0)]),e("div",se,[e("label",ie,l(c(t)("Time Limit")),1),e("span",{class:"label-info","data-bs-content":c(t)("The test Time Limit is in seconds.<br>0 = no Time Limit")},a[3]||(a[3]=[e("i",{class:"bi bi-question-circle-fill"},null,-1)]),8,ae),h(e("input",{type:"number",class:k(["form-control",{"is-invalid":i.value.timeLimit}]),id:"test-input-timelimit","onUpdate:modelValue":a[2]||(a[2]=r=>m.value=r),disabled:o.value},null,10,le),[[y,m.value]]),i.value.timeLimit?(n(),u("div",oe,l(i.value.timeLimit),1)):_("",!0)]),e("button",{type:"button",class:"btn btn-primary",onClick:E,disabled:o.value},[o.value?(n(),u(f,{key:1},[C(l(c(t)("Creating"))+" ...",1)],64)):(n(),u(f,{key:0},[C(l(c(t)("Create")),1)],64))],8,ne)])])]),_:1}))}}),_e=I(re,[["__scopeId","data-v-ab8bcf77"]]);export{_e as default};
