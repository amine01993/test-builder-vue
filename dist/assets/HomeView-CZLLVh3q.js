import{d as U,c as C,_ as b,o as d,a as u,b as s,t as l,e as A,f as I,n as F,u as E,g as L,r as x,h as N,i as V,j as M,k as j,l as w,w as q,m as D,F as k,p as B}from"./index-DgVFOuIu.js";import{u as O}from"./testService-B9g0yUeR.js";import{u as H}from"./userTestService-Bo-wVb0B.js";import{A as Y}from"./AppContainer-B7WmBWY1.js";import"./firestore-CKAN35Ge.js";import"./Question-DJVAB3JS.js";import"./Breadcrumb-0WoaLxXW.js";const P=U({__name:"UserTestItem",props:{userTest:{type:Object,required:!1}},setup(c,{expose:r}){r();const t=new Date,e=C(()=>{const n=c.userTest.started_at.toDate();return new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short",year:t.getFullYear()===n.getFullYear()?void 0:"numeric",hour:"numeric",minute:"numeric"}).format(n)}),m=C(()=>{var T;const n=c.userTest.started_at.toDate(),y=(T=c.userTest.ended_in)==null?void 0:T.toDate();if(y){let i=Math.floor((y-n)/1e3);const a=Math.floor(i/60/60);i=i-a*60*60;const f=Math.floor(i/60);i=i-f*60;const v=i;let _=[];return a&&_.push(a+"h"),f&&_.push(f+"min"),v&&_.push(v+"s"),_.join(" ")}return""}),h=C(()=>{const n=c.userTest.updated_at.toDate();return new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short",year:t.getFullYear()===n.getFullYear()?void 0:"numeric",hour:"numeric",minute:"numeric"}).format(n)}),o={currentDate:t,startedAt:e,lastedFor:m,updatedAt:h};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),z={key:0,class:"user-test-item-content"},Q={class:"user-test-item-title"},R={class:"user-test-item-info"},G={class:"user-test-property"},J={class:"user-test-property"},K={class:"user-test-property"},W={class:"user-test-property"},X={key:0,class:"user-test-property"},Z={class:"user-test-property"},$={class:"user-test-last-update"},ee={key:1,class:"test-item-content"};function te(c,r,t,e,m,h){var o,n;return d(),u("div",{class:F(["user-test-item-container",{"placeholder-wave":!t.userTest}])},[t.userTest?(d(),u("div",z,[s("div",Q,l(t.userTest.test.name),1),r[0]||(r[0]=s("hr",{class:"user-test-item-divider"},null,-1)),s("div",R,[s("div",G,"Full Name: "+l(t.userTest.user.displayName),1),s("div",J,"Email: "+l(t.userTest.user.email),1),s("div",K,"Started At: "+l(e.startedAt),1),s("div",W,"Lasted For: "+l(e.lastedFor),1),t.userTest.result?(d(),u("div",X,"Score: "+l((o=t.userTest.result)==null?void 0:o.score),1)):A("",!0),s("div",Z,"Answered Questions: "+l(((n=t.userTest.report)==null?void 0:n.length)??0)+" out of "+l(t.userTest.test.questionCount),1),s("div",$,"Last updated at: "+l(e.updatedAt),1)])])):(d(),u("div",ee,r[1]||(r[1]=[I('<div class="test-item-title placeholder col-6 offset-3 placeholder-lg bg-secondary"></div><hr class="test-item-divider"><div class="test-item-info"><div class="placeholder col-12 bg-secondary" style="min-height:6em;"></div><div class="placeholder col-8 offset-4 placeholder-sm bg-secondary"></div></div>',3)])))],2)}const se=b(P,[["render",te],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/components/items/UserTestItem.vue"]]),g="user-tests-loader",re=U({__name:"HomeView",setup(c,{expose:r}){r();const{auth:t,user:e}=E(),{showMessage:m}=L(),{testCount:h,loadTestCount:o}=O(),{userTestCount:n,userTests:y,loadUserTests:T,loadMoreUserTests:S}=H(),i=x(!1);let a=null;const f=N(t,async p=>{try{await Promise.all([o(p.uid),T(p.uid)]),a||(a=document.querySelector(`.${g}`))}catch{m("failure","Error loading test sessions.")}});V(()=>{document.addEventListener("scroll",v),a||(a=document.querySelector(`.${g}`))}),M(()=>{f(),document.removeEventListener("scroll",v)});async function v(){if(a&&!i.value&&a.getBoundingClientRect().top<window.innerHeight&&e.value){i.value=!0;try{await S(),await j(),a=document.querySelector(`.${g}`)}catch{m("failure","Error loading more test sessions.")}finally{i.value=!1}}}const _={auth:t,user:e,showMessage:m,testCount:h,loadTestCount:o,userTestCount:n,userTests:y,loadUserTests:T,loadMoreUserTests:S,loadingUserTests:i,get userTestsLoaderEl(){return a},set userTestsLoaderEl(p){a=p},loaderClassName:g,onAuthEventDispose:f,checkLoaderVisiblity:v,UserTestItem:se,AppContainer:Y};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),oe={class:"app-main"},ae={class:"test-stat"},ne={class:"stat-content"},ie={class:"test-stat"},le={key:0,class:"stat-content"},de={key:1,class:"placeholder-wave"},ue={class:"test-report-list"};function ce(c,r,t,e,m,h){return d(),w(e.AppContainer,null,{default:q(()=>[s("div",oe,[s("div",ae,[r[0]||(r[0]=s("div",{class:"stat-title"},"Tests",-1)),s("div",ne,l(e.testCount),1)]),s("div",ie,[r[2]||(r[2]=s("div",{class:"stat-title"},"Test Sessions",-1)),e.userTestCount!==void 0?(d(),u("div",le,l(e.userTestCount),1)):(d(),u("div",de,r[1]||(r[1]=[s("div",{class:"placeholder placeholder-lg col-8 bg-secondary"},null,-1)])))]),s("div",ue,[e.userTests?(d(!0),u(k,{key:0},D(e.userTests,o=>(d(),w(e.UserTestItem,{userTest:o,key:o.id},null,8,["userTest"]))),128)):(d(),u(k,{key:1},D(2,o=>B(e.UserTestItem,{key:"user-test-placeholder-"+o})),64)),e.userTestCount&&e.userTests&&e.userTests.length<e.userTestCount?(d(),w(e.UserTestItem,{key:"user-test-placeholder-loading",class:F(e.loaderClassName)})):A("",!0)])])]),_:1})}const ge=b(re,[["render",ce],["__scopeId","data-v-b4e148ca"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/HomeView.vue"]]);export{ge as default};
