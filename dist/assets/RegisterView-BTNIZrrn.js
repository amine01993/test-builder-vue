import{d as B,u as I,a as M,v as D,r as v,x as G,o as O,e as W,f as j,w as x,y as F,z as T,g as n,h as e,t,i as u,j as d,F as _,k as E,p as b,A as k,B as y,m as P,C as f,l as H,E as $,G as J,H as K,s as Q}from"./index-Cr91u6jy.js";import{v as X}from"./utils-DltTuOhC.js";import{_ as Y}from"./AppContainer.vue_vue_type_script_setup_true_lang-Bo-b2LcD.js";import"./Question-DJVAB3JS.js";const Z={class:"app-main"},ee={class:"sign-container"},se={class:"login-form"},ae={class:"login-form-title mb-4"},ie={key:0,class:"alert alert-danger",role:"alert"},te={class:"mb-3"},le={for:"login-input-email",class:"form-label"},oe={class:"input-group"},ne=["disabled"],re={key:0,class:"invalid-feedback is-invalid"},ue={class:"mb-3"},de={for:"login-input-password",class:"form-label"},ce={class:"input-group"},ve=["disabled"],pe={class:"mb-3"},me={for:"login-input-password-confirm",class:"form-label"},fe={class:"input-group"},ge=["disabled"],_e={key:0,class:"invalid-feedback is-invalid"},be=["disabled"],he={class:"signup-parties"},we={class:"signup-link"},ke=B({__name:"RegisterView",setup(ye){const h=F(),{t:a}=I(),{auth:C,user:V,isAnonymous:L,signUpWithGoogle:R}=M(),{spaceLabel:S}=D(),m=v(""),p=v(""),w=v(""),r=v(!1),c=v(null),U=v(!1),g=v([]),o=G(()=>{const i={};if(!U.value)return i;if(m.value.trim()===""?i.email=a("Email required"):X(m.value.trim())||(i.email=a("Invalid email")),p.value.trim()==="")i.password=[a("Password required")];else if(c.value&&!c.value.isValid){const s=[];c.value.containsLowercaseLetter!==!0&&s.push(a("Require lowercase character")),c.value.containsNonAlphanumericCharacter!==!0&&s.push(a("Require special character")),c.value.containsNumericCharacter!==!0&&s.push(a("Require numeric character")),c.value.meetsMinPasswordLength!==!0&&s.push(a("Minimum password length is {size}",{size:7})),c.value.meetsMaxPasswordLength!==!0&&s.push(a("Password too long")),i.password=s}else p.value!==w.value&&(i.confirmPass=a("Password mismatch"));return i}),q=O(C,i=>{L(i)||h.push({name:"home"})});W(()=>{q()});async function A(){if(!r.value){if(r.value=!0,c.value=await $(C,p.value.trim()),U.value=!0,Object.keys(o.value).length>0){r.value=!1;return}try{const i=J.credential(m.value.trim(),p.value.trim());await K(V.value,i),h.push({name:"home"})}catch(i){g.value=[a("Server Error")+S.value+": "+i.code]}finally{r.value=!1}}}async function N(){try{await R(),h.push({name:"home"})}catch(i){g.value=[a("Server Error")+S.value+": "+i.code]}}return(i,s)=>{const z=T("RouterLink");return n(),j(Y,null,{default:x(()=>[e("div",Z,[e("div",ee,[e("div",se,[e("div",ae,t(u(a)("Sign Up")),1),g.value.length?(n(),d("div",ie,[e("ul",null,[(n(!0),d(_,null,E(g.value,l=>(n(),d("li",{key:l},t(l),1))),128))])])):b("",!0),e("div",te,[e("label",le,t(u(a)("Email")),1),e("div",oe,[s[3]||(s[3]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-at"})],-1)),k(e("input",{type:"email",class:P(["form-control",{"is-invalid":o.value.email}]),id:"login-input-email","onUpdate:modelValue":s[0]||(s[0]=l=>m.value=l),disabled:r.value,"aria-required":""},null,10,ne),[[y,m.value]]),o.value.email?(n(),d("div",re,t(o.value.email),1)):b("",!0)])]),e("div",ue,[e("label",de,t(u(a)("Password")),1),e("div",ce,[s[4]||(s[4]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),k(e("input",{type:"password",class:P(["form-control",{"is-invalid":o.value.password}]),id:"login-input-password","onUpdate:modelValue":s[1]||(s[1]=l=>p.value=l),disabled:r.value,"aria-required":""},null,10,ve),[[y,p.value]]),o.value.password?(n(!0),d(_,{key:0},E(o.value.password,l=>(n(),d("div",{class:"invalid-feedback is-invalid",key:l},t(l),1))),128)):b("",!0)])]),e("div",pe,[e("label",me,t(u(a)("Confirm Password")),1),e("div",fe,[s[5]||(s[5]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),k(e("input",{type:"password",class:P(["form-control",{"is-invalid":o.value.confirmPass}]),id:"login-input-password-confirm","onUpdate:modelValue":s[2]||(s[2]=l=>w.value=l),disabled:r.value},null,10,ge),[[y,w.value]]),o.value.confirmPass?(n(),d("div",_e,t(o.value.confirmPass),1)):b("",!0)])]),e("button",{type:"button",class:"btn btn-primary",onClick:A,disabled:r.value},[r.value?(n(),d(_,{key:1},[f(t(u(a)("Signing Up"))+" ...",1)],64)):(n(),d(_,{key:0},[f(t(u(a)("Sign Up")),1)],64))],8,be)]),e("div",he,[f(t(u(a)("Or Sign Up Using")),1),s[7]||(s[7]=e("br",null,null,-1)),e("button",{type:"button",class:"btn btn-danger google-auth",onClick:N},s[6]||(s[6]=[e("i",{class:"bi bi-google"},null,-1)]))]),e("div",we,[f(t(u(a)("Or Sign In Using")),1),s[8]||(s[8]=e("br",null,null,-1)),H(z,{to:{name:"login"}},{default:x(()=>[f(t(u(a)("Sign In")),1)]),_:1})])])])]),_:1})}}}),xe=Q(ke,[["__scopeId","data-v-918ae1f5"]]);export{xe as default};
