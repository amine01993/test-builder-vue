import{d as w,u as B,a as F,v as z,r as m,x as A,o as E,e as V,g as D,h as U,w as T,i,j as a,k as o,F as y,l as M,t as n,q as N,A as j,B as I,p as L,C as S}from"./index-CEw6Ur-o.js";import{u as O}from"./userTestService-De5gKojP.js";import{A as q}from"./AppContainer-CrW-O1Ra.js";import"./firestore-O8Pw084e.js";const P=w({__name:"SettingsView",setup(k,{expose:d}){d();const{t:r}=B(),{auth:e}=F(),{displayName:c,updateDisplayName:f}=O(),{spaceLabel:s}=z(),p=m(!1),l=m(!1),_=m([]),u=m(""),b=A(()=>{const t={};return p.value&&c.value===""&&(t.displayName=r("Full Name required")),t}),h=E(e,async t=>{t!=null&&t.displayName&&(c.value=t.displayName)});V(()=>{h()});function x(t){if(u.value="",t.target.files&&t.target.files.length>0){const v=t.target.files[0];if(console.log("onFileUpload",v),v.size/1024/1024>4){u.value=r("The uploaded file cannot exceed the maximum limit of {size}.",{size:"2MB"});return}if(!/^image\//i.test(v.type)){u.value=r("The uploaded file must be an image.");return}}}async function C(){if(!l.value){if(l.value=!0,p.value=!0,Object.keys(b.value).length>0){l.value=!1;return}try{await f(),_.value=[]}catch(t){_.value=[r("Server Error")+s.value+": "+t.code]}finally{l.value=!1}}}const g={t:r,auth:e,displayName:c,updateDisplayName:f,spaceLabel:s,submitted:p,submitting:l,serverErrors:_,fileError:u,errors:b,onAuthEventDispose:h,onFileUpload:x,updateFullName:C,AppContainer:q};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),G={class:"app-main"},H={key:0,class:"alert alert-danger",role:"alert"},J={class:"personal-info-form"},K={class:"form-title mb-4"},Q={class:"mb-3"},R={for:"test-input-name",class:"form-label"},W=["disabled"],X={key:0,class:"invalid-feedback is-invalid"},Y=["disabled"];function Z(k,d,r,e,c,f){return i(),U(e.AppContainer,null,{default:T(()=>[a("div",G,[e.serverErrors.length?(i(),o("div",H,[a("ul",null,[(i(!0),o(y,null,M(e.serverErrors,s=>(i(),o("li",{key:s},n(s),1))),128))])])):N("",!0),a("div",J,[a("div",K,n(e.t("Personal Information")),1),a("div",Q,[a("label",R,n(e.t("Full Name")),1),j(a("input",{type:"text",class:L(["form-control",{"is-invalid":e.errors.displayName}]),id:"test-input-name","onUpdate:modelValue":d[0]||(d[0]=s=>e.displayName=s),disabled:e.submitting},null,10,W),[[I,e.displayName]]),e.errors.displayName?(i(),o("div",X,n(e.errors.displayName),1)):N("",!0)]),a("button",{type:"button",class:"btn btn-primary",onClick:e.updateFullName,disabled:e.submitting},[e.submitting?(i(),o(y,{key:1},[S(n(e.t("Saving"))+" ...",1)],64)):(i(),o(y,{key:0},[S(n(e.t("Save")),1)],64))],8,Y)])])]),_:1})}const ie=D(P,[["render",Z],["__scopeId","data-v-5e0b544f"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/SettingsView.vue"]]);export{ie as default};
