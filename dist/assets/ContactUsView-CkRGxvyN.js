import{J as K,a as F,r as S,x as O,K as U,d as G,u as Y,b as z,v as Q,o as $,c as J,e as Z,f as W,w as X,g as y,h as m,j as w,F as k,k as ee,t as g,p as A,i as _,A as E,B as j,m as x,I as P,C as N,s as te}from"./index-D9eu1wvy.js";import{u as ne}from"./firestore-CkCHjU9t.js";import{v as ae}from"./utils-DltTuOhC.js";import{_ as re}from"./AppContainer.vue_vue_type_script_setup_true_lang-Ci2WOSVt.js";import"./Question-DJVAB3JS.js";var T={},L={},R={},q;function V(){if(q)return R;q=1;var l=R.__awaiter||function(h,t,e,a){function i(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function d(u){try{r(a.next(u))}catch(p){o(p)}}function s(u){try{r(a.throw(u))}catch(p){o(p)}}function r(u){u.done?n(u.value):i(u.value).then(d,s)}r((a=a.apply(h,t||[])).next())})},c=R.__generator||function(h,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,i,n,o;return o={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function d(r){return function(u){return s([r,u])}}function s(r){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,r[0]&&(e=0)),e;)try{if(a=1,i&&(n=r[0]&2?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[r[0]&2,n.value]),r[0]){case 0:case 1:n=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,i=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){e.label=r[1];break}if(r[0]===6&&e.label<n[1]){e.label=n[1],n=r;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(r);break}n[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(h,e)}catch(u){r=[6,u],i=0}finally{a=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(R,"__esModule",{value:!0}),R.ReCaptchaInstance=void 0;var f=function(){function h(t,e,a){this.siteKey=t,this.recaptchaID=e,this.recaptcha=a,this.styleContainer=null}return h.prototype.execute=function(t){return l(this,void 0,void 0,function(){var e;return c(this,function(a){switch(a.label){case 0:return this.recaptcha.enterprise?[4,this.recaptcha.enterprise.execute(this.recaptchaID,{action:t})]:[3,2];case 1:return e=a.sent(),[3,4];case 2:return[4,this.recaptcha.execute(this.recaptchaID,{action:t})];case 3:e=a.sent(),a.label=4;case 4:return[2,e]}})})},h.prototype.getSiteKey=function(){return this.siteKey},h.prototype.hideBadge=function(){this.styleContainer===null&&(this.styleContainer=document.createElement("style"),this.styleContainer.innerHTML=".grecaptcha-badge{visibility:hidden !important;}",document.head.appendChild(this.styleContainer))},h.prototype.showBadge=function(){this.styleContainer!==null&&(document.head.removeChild(this.styleContainer),this.styleContainer=null)},h}();return R.ReCaptchaInstance=f,R}var B;function ie(){if(B)return L;B=1;var l=L.__assign||function(){return l=Object.assign||function(t){for(var e,a=1,i=arguments.length;a<i;a++){e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},l.apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0}),L.getInstance=L.load=void 0;var c=V(),f;(function(t){t[t.NOT_LOADED=0]="NOT_LOADED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"})(f||(f={}));var h=function(){function t(){}return t.load=function(e,a){if(a===void 0&&(a={}),typeof document>"u")return Promise.reject(new Error("This is a library for the browser!"));if(t.getLoadingState()===f.LOADED)return t.instance.getSiteKey()===e?Promise.resolve(t.instance):Promise.reject(new Error("reCAPTCHA already loaded with different site key!"));if(t.getLoadingState()===f.LOADING)return e!==t.instanceSiteKey?Promise.reject(new Error("reCAPTCHA already loaded with different site key!")):new Promise(function(n,o){t.successfulLoadingConsumers.push(function(d){return n(d)}),t.errorLoadingRunnable.push(function(d){return o(d)})});t.instanceSiteKey=e,t.setLoadingState(f.LOADING);var i=new t;return new Promise(function(n,o){i.loadScript(e,a.useRecaptchaNet||!1,a.useEnterprise||!1,a.renderParameters?a.renderParameters:{},a.customUrl).then(function(){t.setLoadingState(f.LOADED);var d=i.doExplicitRender(grecaptcha,e,a.explicitRenderParameters?a.explicitRenderParameters:{},a.useEnterprise||!1),s=new c.ReCaptchaInstance(e,d,grecaptcha);t.successfulLoadingConsumers.forEach(function(r){return r(s)}),t.successfulLoadingConsumers=[],a.autoHideBadge&&s.hideBadge(),t.instance=s,n(s)}).catch(function(d){t.errorLoadingRunnable.forEach(function(s){return s(d)}),t.errorLoadingRunnable=[],o(d)})})},t.getInstance=function(){return t.instance},t.setLoadingState=function(e){t.loadingState=e},t.getLoadingState=function(){return t.loadingState===null?f.NOT_LOADED:t.loadingState},t.prototype.loadScript=function(e,a,i,n,o){var d=this;a===void 0&&(a=!1),i===void 0&&(i=!1),n===void 0&&(n={}),o===void 0&&(o="");var s=document.createElement("script");s.setAttribute("recaptcha-v3-script",""),s.setAttribute("async",""),s.setAttribute("defer","");var r="https://www.google.com/recaptcha/api.js";a?i?r="https://recaptcha.net/recaptcha/enterprise.js":r="https://recaptcha.net/recaptcha/api.js":i&&(r="https://www.google.com/recaptcha/enterprise.js"),o&&(r=o),n.render&&(n.render=void 0);var u=this.buildQueryString(n);return s.src=r+"?render=explicit"+u,new Promise(function(p,I){s.addEventListener("load",d.waitForScriptToLoad(function(){p(s)},i),!1),s.onerror=function(D){t.setLoadingState(f.NOT_LOADED),I(D)},document.head.appendChild(s)})},t.prototype.buildQueryString=function(e){var a=Object.keys(e);return a.length<1?"":"&"+Object.keys(e).filter(function(i){return!!e[i]}).map(function(i){return i+"="+e[i]}).join("&")},t.prototype.waitForScriptToLoad=function(e,a){var i=this;return function(){window.grecaptcha===void 0?setTimeout(function(){i.waitForScriptToLoad(e,a)},t.SCRIPT_LOAD_DELAY):a?window.grecaptcha.enterprise.ready(function(){e()}):window.grecaptcha.ready(function(){e()})}},t.prototype.doExplicitRender=function(e,a,i,n){var o=l({sitekey:a},i);return i.container?n?e.enterprise.render(i.container,o):e.render(i.container,o):n?e.enterprise.render(o):e.render(o)},t.loadingState=null,t.instance=null,t.instanceSiteKey=null,t.successfulLoadingConsumers=[],t.errorLoadingRunnable=[],t.SCRIPT_LOAD_DELAY=25,t}();return L.load=h.load,L.getInstance=h.getInstance,L}var M;function se(){return M||(M=1,function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.ReCaptchaInstance=l.getInstance=l.load=void 0;var c=ie();Object.defineProperty(l,"load",{enumerable:!0,get:function(){return c.load}}),Object.defineProperty(l,"getInstance",{enumerable:!0,get:function(){return c.getInstance}});var f=V();Object.defineProperty(l,"ReCaptchaInstance",{enumerable:!0,get:function(){return f.ReCaptchaInstance}})}(T)),T}var oe=se();const ue=K("contactService",()=>{ne();const{user:l}=F(),c=S(""),f=S(""),h=S("");function t(){l.value&&(l.value.displayName&&(c.value=l.value.displayName),l.value.email&&(f.value=l.value.email))}async function e(a){const{post:i}=U(),n={name:c.value,email:f.value,message:h.value};return l.value&&(n.user_id=l.value.uid),await i("/contact-form",{...n,token:a})}return{name:O(()=>c),email:O(()=>f),message:O(()=>h),loadUserInfo:t,sendContactInfo:e}}),ce={class:"app-main"},le={key:0,class:"alert alert-danger",role:"alert"},de={class:"contact-us-form"},fe={class:"form-title mb-4"},he={class:"mb-3"},ve={for:"test-input-name",class:"form-label"},me=["disabled"],pe={key:0,class:"invalid-feedback is-invalid"},ge={class:"mb-3"},ye={for:"test-input-email",class:"form-label"},_e=["disabled"],be={key:0,class:"invalid-feedback is-invalid"},Ce={class:"mb-3"},we={for:"test-input-message",class:"form-label"},Le=["disabled"],Ie={key:0,class:"invalid-feedback is-invalid"},Re=["disabled"],Se="6LdZ-PwqAAAAAKWgOPyb-O9hhHRyhJY3YHgL_zZb",Ae=G({__name:"ContactUsView",setup(l){const{t:c}=Y(),{auth:f}=F(),{showMessage:h}=z(),{name:t,email:e,message:a,loadUserInfo:i,sendContactInfo:n}=ue(),{spaceLabel:o}=Q(),d=S(!1),s=S(!1),r=S([]),u=O(()=>{const v={};return d.value&&(t.value===""&&(v.name=c("Full Name required")),e.value===""?v.email=c("Email required"):ae(e.value)||(v.email=c("Invalid email")),a.value===""&&(v.message=c("Message required"))),v});let p,I;const D=$(f,()=>{i()});J(async()=>{oe.load(Se,{}).then(v=>{I=v,I.execute("test_builder_contact").then(b=>{p=b,console.log("token",p)}),I.showBadge()})}),Z(()=>{D(),I&&I.hideBadge()});async function H(){if(!s.value){if(s.value=!0,d.value=!0,Object.keys(u.value).length>0){s.value=!1;return}try{if(p){const v=await n(p);console.log("response",v),v.error?h("failure",v.error):h("success",c("Your message was sent successfully, Thanks!")),r.value=[]}}catch(v){r.value=[c("Server Error")+o.value+": "+v.code]}finally{s.value=!1}}}return(v,b)=>(y(),W(re,null,{default:X(()=>[m("div",ce,[r.value.length?(y(),w("div",le,[m("ul",null,[(y(!0),w(k,null,ee(r.value,C=>(y(),w("li",{key:C},g(C),1))),128))])])):A("",!0),m("div",de,[m("div",fe,g(_(c)("Contact us")),1),m("div",he,[m("label",ve,g(_(c)("Full Name")),1),E(m("input",{type:"text",class:x(["form-control",{"is-invalid":u.value.name}]),id:"test-input-name","onUpdate:modelValue":b[0]||(b[0]=C=>P(t)?t.value=C:null),disabled:s.value,"aria-required":""},null,10,me),[[j,_(t)]]),u.value.name?(y(),w("div",pe,g(u.value.name),1)):A("",!0)]),m("div",ge,[m("label",ye,g(_(c)("Email")),1),E(m("input",{type:"text",class:x(["form-control",{"is-invalid":u.value.email}]),id:"test-input-email","onUpdate:modelValue":b[1]||(b[1]=C=>P(e)?e.value=C:null),disabled:s.value,"aria-required":""},null,10,_e),[[j,_(e)]]),u.value.email?(y(),w("div",be,g(u.value.email),1)):A("",!0)]),m("div",Ce,[m("label",we,g(_(c)("Message")),1),E(m("textarea",{class:x(["form-control",{"is-invalid":u.value.message}]),id:"test-input-message",rows:"5","onUpdate:modelValue":b[2]||(b[2]=C=>P(a)?a.value=C:null),disabled:s.value,"aria-required":""},null,10,Le),[[j,_(a)]]),u.value.message?(y(),w("div",Ie,g(u.value.message),1)):A("",!0)]),m("button",{type:"button",class:"btn btn-primary",onClick:H,disabled:s.value},[s.value?(y(),w(k,{key:1},[N(g(_(c)("Sending"))+" ...",1)],64)):(y(),w(k,{key:0},[N(g(_(c)("Send")),1)],64))],8,Re)])])]),_:1}))}}),xe=te(Ae,[["__scopeId","data-v-128f02c0"]]);export{xe as default};
