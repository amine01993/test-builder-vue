import{d as I,u as D,a as N,v as z,r as p,x as O,o as P,e as R,f as W,w,y as j,z as q,g as l,h as s,t as i,i as n,j as u,F as _,k as F,p as f,A as L,B as U,m as x,C as m,l as G,D as T,s as M}from"./index-B1zD-M5g.js";import{v as $}from"./utils-DltTuOhC.js";import{_ as H}from"./AppContainer.vue_vue_type_script_setup_true_lang-5ZPq4PI3.js";import"./Question-DJVAB3JS.js";const J={class:"app-main"},K={class:"sign-container"},Q={class:"login-form"},X={class:"login-form-title mb-4"},Y={key:0,class:"alert alert-danger",role:"alert"},Z={class:"mb-3"},ss={for:"login-input-email",class:"form-label"},es={class:"input-group"},as=["disabled"],ts={key:0,class:"invalid-feedback is-invalid"},is={class:"mb-3"},os={for:"login-input-password",class:"form-label"},ls={class:"input-group"},ns=["disabled"],rs={key:0,class:"invalid-feedback is-invalid"},us=["disabled"],ds={class:"signup-parties"},cs={class:"signup-link"},vs=I({__name:"LoginView",setup(ps){const b=j(),{t:a}=D(),{auth:h,isAnonymous:C,signUpWithGoogle:E}=N(),{spaceLabel:y}=z(),c=p(""),g=p(""),k=p(!1),o=p(!1),v=p([]),r=O(()=>{const t={};return k.value&&(c.value===""?t.email=a("Email required"):$(c.value)||(t.email=a("Invalid email")),g.value===""&&(t.password=a("Password required"))),t}),S=P(h,t=>{C(t)||b.push({name:"home"})});R(()=>{S()});async function V(){if(!o.value){if(o.value=!0,k.value=!0,Object.keys(r.value).length>0){o.value=!1;return}try{await T(h,c.value,g.value),v.value=[]}catch(t){v.value=[a("Server Error")+y.value+": "+t.code]}finally{o.value=!1}}}async function A(){try{await E(),b.push({name:"home"})}catch(t){v.value=[a("Server Error")+y.value+": "+t.code]}}return(t,e)=>{const B=q("RouterLink");return l(),W(H,null,{default:w(()=>[s("div",J,[s("div",K,[s("div",Q,[s("div",X,i(n(a)("Login")),1),v.value.length?(l(),u("div",Y,[s("ul",null,[(l(!0),u(_,null,F(v.value,d=>(l(),u("li",{key:d},i(d),1))),128))])])):f("",!0),s("div",Z,[s("label",ss,i(n(a)("Email")),1),s("div",es,[e[2]||(e[2]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-at"})],-1)),L(s("input",{type:"email",class:x(["form-control",{"is-invalid":r.value.email}]),id:"login-input-email","onUpdate:modelValue":e[0]||(e[0]=d=>c.value=d),disabled:o.value},null,10,as),[[U,c.value]]),r.value.email?(l(),u("div",ts,i(r.value.email),1)):f("",!0)])]),s("div",is,[s("label",os,i(n(a)("Password")),1),s("div",ls,[e[3]||(e[3]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-lock-fill"})],-1)),L(s("input",{type:"password",class:x(["form-control",{"is-invalid":r.value.password}]),id:"login-input-password","onUpdate:modelValue":e[1]||(e[1]=d=>g.value=d),disabled:o.value},null,10,ns),[[U,g.value]]),r.value.password?(l(),u("div",rs,i(r.value.password),1)):f("",!0)])]),s("button",{type:"button",class:"btn btn-primary",onClick:V,disabled:o.value},[o.value?(l(),u(_,{key:1},[m(i(n(a)("Logging In"))+" ...",1)],64)):(l(),u(_,{key:0},[m(i(n(a)("Login")),1)],64))],8,us)]),s("div",ds,[m(i(n(a)("Or Sign Up Using")),1),e[5]||(e[5]=s("br",null,null,-1)),s("button",{type:"button",class:"btn btn-danger google-auth",onClick:A},e[4]||(e[4]=[s("i",{class:"bi bi-google"},null,-1)]))]),s("div",cs,[m(i(n(a)("Or Sign Up Using")),1),e[6]||(e[6]=s("br",null,null,-1)),G(B,{to:{name:"register"}},{default:w(()=>[m(i(n(a)("Sign Up")),1)]),_:1})])])])]),_:1})}}}),bs=M(vs,[["__scopeId","data-v-f283a9c9"]]);export{bs as default};
