import{d as E,u as N,v as S,r as c,x as B,c as q,P as O,e as U,f as D,w as j,y as z,g as n,h as e,t as l,i as d,j as u,F as b,k as A,p as _,A as h,B as y,m as k,C,s as F}from"./index-B1zD-M5g.js";import{u as I}from"./testService-CFPtsndb.js";import{_ as M}from"./AppContainer.vue_vue_type_script_setup_true_lang-5ZPq4PI3.js";import"./firestore-qVOR4QEO.js";import"./Question-DJVAB3JS.js";const P={class:"app-main"},R={class:"test-form"},$={class:"test-form-title mb-4"},G={key:0,class:"alert alert-danger",role:"alert"},H={class:"mb-3"},J={for:"test-input-name",class:"form-label"},K=["disabled"],Q={key:0,class:"invalid-feedback is-invalid"},W={class:"mb-3"},X={for:"test-input-description",class:"form-label"},Y=["disabled"],Z={key:0,class:"invalid-feedback is-invalid"},ee={class:"mb-3"},te={for:"test-input-timelimit",class:"form-label"},se=["data-bs-content"],ie=["disabled"],ae={key:0,class:"invalid-feedback is-invalid"},le=["disabled"],oe=E({__name:"CreateTestView",setup(ne){const L=z(),{t}=N(),{spaceLabel:x}=S(),{addTest:w}=I(),v=c(""),f=c(""),m=c(0),T=c(!1),o=c(!1),p=c([]),i=B(()=>{const s={};return T.value&&(v.value===""&&(s.name=t("Name required")),typeof m.value=="string"?s.timeLimit=t("The time limit must be a number"):m.value<0&&(s.timeLimit=t("The time limit can't be a negatif number"))),s}),g=[];q(()=>{document.querySelectorAll(".app-main .label-info").forEach(a=>{g.push(new O(a,{container:"body",placement:"right",html:!0,trigger:"click"}))})}),U(()=>{g.forEach(s=>s.dispose())});async function V(){if(!o.value){if(o.value=!0,T.value=!0,Object.keys(i.value).length>0){o.value=!1;return}try{await w({name:v.value,description:f.value,max_points:0,questionCount:0,time_limit:Number(m.value)}),p.value=[],L.push({name:"tests"})}catch(s){p.value=[t("Server Error")+x.value+": "+s.code]}finally{o.value=!1}}}return(s,a)=>(n(),D(M,null,{default:j(()=>[e("div",P,[e("div",R,[e("div",$,l(d(t)("Create New Test")),1),p.value.length?(n(),u("div",G,[e("ul",null,[(n(!0),u(b,null,A(p.value,r=>(n(),u("li",{key:r},l(r),1))),128))])])):_("",!0),e("div",H,[e("label",J,l(d(t)("Name")),1),h(e("input",{type:"text",class:k(["form-control",{"is-invalid":i.value.name}]),id:"test-input-name","onUpdate:modelValue":a[0]||(a[0]=r=>v.value=r),disabled:o.value},null,10,K),[[y,v.value]]),i.value.name?(n(),u("div",Q,l(i.value.name),1)):_("",!0)]),e("div",W,[e("label",X,l(d(t)("Description")),1),h(e("textarea",{class:k(["form-control",{"is-invalid":i.value.description}]),id:"test-input-description","onUpdate:modelValue":a[1]||(a[1]=r=>f.value=r),rows:"3",disabled:o.value},null,10,Y),[[y,f.value]]),i.value.description?(n(),u("div",Z,l(i.value.description),1)):_("",!0)]),e("div",ee,[e("label",te,l(d(t)("Time Limit")),1),e("span",{class:"label-info","data-bs-content":d(t)("The test Time Limit is in seconds.<br>0 = no Time Limit")},a[3]||(a[3]=[e("i",{class:"bi bi-question-circle-fill"},null,-1)]),8,se),h(e("input",{type:"number",class:k(["form-control",{"is-invalid":i.value.timeLimit}]),id:"test-input-timelimit","onUpdate:modelValue":a[2]||(a[2]=r=>m.value=r),disabled:o.value},null,10,ie),[[y,m.value]]),i.value.timeLimit?(n(),u("div",ae,l(i.value.timeLimit),1)):_("",!0)]),e("button",{type:"button",class:"btn btn-primary",onClick:V,disabled:o.value},[o.value?(n(),u(b,{key:1},[C(l(d(t)("Creating"))+" ...",1)],64)):(n(),u(b,{key:0},[C(l(d(t)("Create")),1)],64))],8,le)])])]),_:1}))}}),ve=F(oe,[["__scopeId","data-v-0f514dac"]]);export{ve as default};
