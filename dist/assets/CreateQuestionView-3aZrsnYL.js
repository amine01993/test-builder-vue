import{d as O,u as U,b as D,a as L,v as P,r as c,x as j,o as z,c as I,P as R,e as $,f as G,w as H,y as J,g as u,h as e,t as o,i as s,j as d,F as x,k as K,p as b,C as g,A as k,B as w,m as C,T as W,s as X}from"./index-CYSG3gem.js";import{u as Y,a as Z}from"./testService-Cnbo4ErZ.js";import{Q as v}from"./Question-DJVAB3JS.js";import{_ as ee}from"./AppContainer.vue_vue_type_script_setup_true_lang-6SrFR88_.js";import"./firestore-PMUsJiSA.js";const te={class:"app-main"},se={class:"question-form"},oe={class:"question-form-title mb-4"},ie={key:0,class:"alert alert-danger",role:"alert"},ae={class:"mb-3 test-name"},ne={class:"mb-3"},le={for:"question-input-text",class:"form-label"},ue=["disabled"],re={key:0,class:"invalid-feedback is-invalid"},de={class:"mb-3"},ce={for:"question-input-type",class:"form-label"},ve=["disabled"],pe=["value"],me=["value"],_e=["value"],fe=["value"],be={key:0,class:"invalid-feedback is-invalid"},he={class:"mb-3"},ye={for:"question-input-position",class:"form-label"},xe=["data-bs-content"],ge=["disabled"],ke={key:0,class:"invalid-feedback is-invalid"},Ce=["disabled"],qe=O({__name:"CreateQuestionView",props:{test_id:{}},setup(q){const E=J(),{t}=U(),{showMessage:h}=D(),{auth:V}=L(),{spaceLabel:M}=P(),{test:p,loadTest:N}=Y(),{addQuestion:A}=Z(),m=c(""),y=c(v.Text),_=c(0),S=c(!1),l=c(!1),f=c([]),n=j(()=>{const i={};return S.value&&(m.value===""&&(i.text=t("Question required")),typeof _.value=="string"&&(i.position=t("The position must be a number"))),i}),B=z(V,async()=>{try{if(await N(q.test_id),!p.value){h("failure",t("Test Not Found."));return}}catch{h("failure",t("Error loading test."))}finally{}}),T=[];I(()=>{document.querySelectorAll(".app-main .label-info").forEach(a=>{T.push(new R(a,{container:"body",placement:"right",html:!0,trigger:"click"}))})}),$(()=>{T.forEach(i=>i.dispose()),B()});async function F(){if(!(l.value||!p.value)){if(l.value=!0,S.value=!0,Object.keys(n.value).length>0){l.value=!1;return}try{await A(p.value,{text:m.value,max_points:0,choiceCount:0,type:y.value,position:Number(_.value)}),f.value=[],h("success",t("Question created with success.")),E.push({name:"edit-test",params:{test_id:q.test_id},query:{sF:0}})}catch(i){f.value=[t("Server Error")+M.value+": "+i.code]}finally{l.value=!1}}}return(i,a)=>(u(),G(ee,{test_id:i.test_id},{default:H(()=>{var Q;return[e("div",te,[e("div",se,[e("div",oe,o(s(t)("Create Question")),1),f.value.length?(u(),d("div",ie,[e("ul",null,[(u(!0),d(x,null,K(f.value,r=>(u(),d("li",{key:r},o(r),1))),128))])])):b("",!0),e("div",ae,o((Q=s(p))==null?void 0:Q.name),1),e("div",ne,[e("label",le,[g(o(s(t)("Question")),1),a[3]||(a[3]=e("span",{class:"required"},"*",-1))]),k(e("input",{type:"text",class:C(["form-control",{"is-invalid":n.value.text}]),id:"question-input-text","onUpdate:modelValue":a[0]||(a[0]=r=>m.value=r),disabled:l.value,"aria-required":""},null,10,ue),[[w,m.value]]),n.value.text?(u(),d("div",re,o(n.value.text),1)):b("",!0)]),e("div",de,[e("label",ce,o(s(t)("Question Type")),1),k(e("select",{class:C(["form-select",{"is-invalid":n.value.type}]),id:"question-input-type","onUpdate:modelValue":a[1]||(a[1]=r=>y.value=r),disabled:l.value},[e("option",{value:s(v).Text},o(s(t)("Text")),9,pe),e("option",{value:s(v).MultipleChoice},o(s(t)("Multiple Choice")),9,me),e("option",{value:s(v).Number},o(s(t)("Number")),9,_e),e("option",{value:s(v).SingleChoice},o(s(t)("Single Choice")),9,fe)],10,ve),[[W,y.value]]),n.value.type?(u(),d("div",be,o(n.value.type),1)):b("",!0)]),e("div",he,[e("label",ye,o(s(t)("Position")),1),e("span",{class:"label-info","data-bs-content":s(t)("The position of the question in the test.")},a[4]||(a[4]=[e("i",{class:"bi bi-question-circle-fill"},null,-1)]),8,xe),k(e("input",{type:"number",class:C(["form-control",{"is-invalid":n.value.position}]),id:"question-input-position","onUpdate:modelValue":a[2]||(a[2]=r=>_.value=r),disabled:l.value},null,10,ge),[[w,_.value]]),n.value.position?(u(),d("div",ke,o(n.value.position),1)):b("",!0)]),e("button",{type:"button",class:"btn btn-primary",onClick:F,disabled:l.value},[l.value?(u(),d(x,{key:1},[g(o(s(t)("Creating"))+" ...",1)],64)):(u(),d(x,{key:0},[g(o(s(t)("Create")),1)],64))],8,Ce)])])]}),_:1},8,["test_id"]))}}),Ve=X(qe,[["__scopeId","data-v-df864d84"]]);export{Ve as default};
