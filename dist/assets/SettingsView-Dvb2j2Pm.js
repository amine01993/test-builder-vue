import{d as x,u as C,r as d,c as w,h as F,j as B,_ as E,l as V,w as A,o as i,b as r,a as n,F as p,m as D,t as y,e as g,x as U,y as z,n as T,z as h}from"./index-CGS4B7OT.js";import{u as M}from"./userTestService-CXkSjIBF.js";import{A as j}from"./AppContainer-BbQHt-u2.js";import"./firestore-B39V3hTY.js";const O=x({__name:"SettingsView",setup(N,{expose:s}){s();const{auth:u}=C(),{displayName:e,updateDisplayName:m}=M(),o=d(!1),a=d(!1),c=d([]),l=d(""),v=w(()=>{const t={};return o.value&&e.value===""&&(t.displayName="Full Name required"),t}),_=F(u,async t=>{t!=null&&t.displayName&&(e.value=t.displayName)});B(()=>{_()});function S(t){if(l.value="",t.target.files&&t.target.files.length>0){const f=t.target.files[0];if(console.log("onFileUpload",f),f.size/1024/1024>4){l.value="The uploaded file cannot exceed the maximum limit of 4MB.";return}if(!/^image\//i.test(f.type)){l.value="The uploaded file must be an image.";return}}}async function k(){if(!a.value){if(a.value=!0,o.value=!0,Object.keys(v.value).length>0){a.value=!1;return}try{await m(),c.value=[]}catch(t){c.value=["Server Error: "+t.code]}finally{a.value=!1}}}const b={auth:u,displayName:e,updateDisplayName:m,submitted:o,submitting:a,serverErrors:c,fileError:l,errors:v,onAuthEventDispose:_,onFileUpload:S,updateFullName:k,AppContainer:j};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),I={class:"app-main"},P={key:0,class:"alert alert-danger",role:"alert"},q={class:"personal-info-form"},L={class:"mb-3"},G=["disabled"],H={key:0,class:"invalid-feedback is-invalid"},J=["disabled"];function K(N,s,u,e,m,o){return i(),V(e.AppContainer,null,{default:A(()=>[r("div",I,[e.serverErrors.length?(i(),n("div",P,[r("ul",null,[(i(!0),n(p,null,D(e.serverErrors,a=>(i(),n("li",{key:a},y(a),1))),128))])])):g("",!0),r("div",q,[s[2]||(s[2]=r("div",{class:"form-title mb-4"},"Personal Information",-1)),r("div",L,[s[1]||(s[1]=r("label",{for:"test-input-name",class:"form-label"},"Full Name",-1)),U(r("input",{type:"text",class:T(["form-control",{"is-invalid":e.errors.name}]),id:"test-input-name","onUpdate:modelValue":s[0]||(s[0]=a=>e.displayName=a),disabled:e.submitting},null,10,G),[[z,e.displayName]]),e.errors.name?(i(),n("div",H,y(e.errors.name),1)):g("",!0)]),r("button",{type:"button",class:"btn btn-primary",onClick:e.updateFullName,disabled:e.submitting},[e.submitting?(i(),n(p,{key:1},[h("Saving ...")],64)):(i(),n(p,{key:0},[h("Save")],64))],8,J)])])]),_:1})}const Z=E(O,[["render",K],["__scopeId","data-v-5e0b544f"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/SettingsView.vue"]]);export{Z as default};
