import{d as B,s as D,u as I,a as O,v as N,r as d,x as P,o as W,e as j,y as q,g as z,z as G,h as R,w as U,i as a,j as e,t,k as r,F as h,l as F,q as w,A as E,B as L,p as S,C as u,m as T}from"./index-CEw6Ur-o.js";import{v as M}from"./utils-BFrGjP34.js";import{A as H}from"./AppContainer-CrW-O1Ra.js";import"./Question-DJVAB3JS.js";const J=B({__name:"LoginView",setup(x,{expose:i}){i();const c=D(),{t:s}=I(),{auth:m,isAnonymous:_,signUpWithGoogle:v}=O(),{spaceLabel:n}=N(),g=d(""),b=d(""),f=d(!1),l=d(!1),p=d([]),y=P(()=>{const o={};return f.value&&(g.value===""?o.email=s("Email required"):M(g.value)||(o.email=s("Invalid email")),b.value===""&&(o.password=s("Password required"))),o}),k=W(m,o=>{_(o)||c.push({name:"home"})});j(()=>{k()});async function A(){if(!l.value){if(l.value=!0,f.value=!0,Object.keys(y.value).length>0){l.value=!1;return}try{await q(m,g.value,b.value),p.value=[]}catch(o){p.value=[s("Server Error")+n.value+": "+o.code]}finally{l.value=!1}}}async function V(){try{await v(),c.push({name:"home"})}catch(o){p.value=[s("Server Error")+n.value+": "+o.code]}}const C={router:c,t:s,auth:m,isAnonymous:_,signUpWithGoogle:v,spaceLabel:n,email:g,password:b,submitted:f,submitting:l,serverErrors:p,errors:y,onAuthEventDispose:k,login:A,signUpWithG:V,AppContainer:H};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),K={class:"app-main"},Q={class:"sign-container"},X={class:"login-form"},Y={class:"login-form-title mb-4"},Z={key:0,class:"alert alert-danger",role:"alert"},$={class:"mb-3"},ss={for:"login-input-email",class:"form-label"},es={class:"input-group"},is=["disabled"],os={key:0,class:"invalid-feedback is-invalid"},ts={class:"mb-3"},ns={for:"login-input-password",class:"form-label"},as={class:"input-group"},rs=["disabled"],ls={key:0,class:"invalid-feedback is-invalid"},ds=["disabled"],us={class:"signup-parties"},cs={class:"signup-link"};function ms(x,i,c,s,m,_){const v=G("RouterLink");return a(),R(s.AppContainer,null,{default:U(()=>[e("div",K,[e("div",Q,[e("div",X,[e("div",Y,t(s.t("Login")),1),s.serverErrors.length?(a(),r("div",Z,[e("ul",null,[(a(!0),r(h,null,F(s.serverErrors,n=>(a(),r("li",{key:n},t(n),1))),128))])])):w("",!0),e("div",$,[e("label",ss,t(s.t("Email")),1),e("div",es,[i[2]||(i[2]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-at"})],-1)),E(e("input",{type:"email",class:S(["form-control",{"is-invalid":s.errors.email}]),id:"login-input-email","onUpdate:modelValue":i[0]||(i[0]=n=>s.email=n),disabled:s.submitting},null,10,is),[[L,s.email]]),s.errors.email?(a(),r("div",os,t(s.errors.email),1)):w("",!0)])]),e("div",ts,[e("label",ns,t(s.t("Password")),1),e("div",as,[i[3]||(i[3]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),E(e("input",{type:"password",class:S(["form-control",{"is-invalid":s.errors.password}]),id:"login-input-password","onUpdate:modelValue":i[1]||(i[1]=n=>s.password=n),disabled:s.submitting},null,10,rs),[[L,s.password]]),s.errors.password?(a(),r("div",ls,t(s.errors.password),1)):w("",!0)])]),e("button",{type:"button",class:"btn btn-primary",onClick:s.login,disabled:s.submitting},[s.submitting?(a(),r(h,{key:1},[u(t(s.t("Logging In"))+" ...",1)],64)):(a(),r(h,{key:0},[u(t(s.t("Login")),1)],64))],8,ds)]),e("div",us,[u(t(s.t("Or Sign Up Using")),1),i[5]||(i[5]=e("br",null,null,-1)),e("button",{type:"button",class:"btn btn-danger google-auth",onClick:s.signUpWithG},i[4]||(i[4]=[e("i",{class:"bi bi-google"},null,-1)]))]),e("div",cs,[u(t(s.t("Or Sign Up Using")),1),i[6]||(i[6]=e("br",null,null,-1)),T(v,{to:{name:"register"}},{default:U(()=>[u(t(s.t("Sign Up")),1)]),_:1})])])])]),_:1})}const bs=z(J,[["render",ms],["__scopeId","data-v-45f5edd7"],["__file","C:/Users/erram/OneDrive/Documents/test-builder-vue/src/views/LoginView.vue"]]);export{bs as default};
