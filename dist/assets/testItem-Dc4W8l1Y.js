import{y as L,u as g,b as D,K as k,L as M,r as b,x as i,c as S,e as x}from"./index-hcXieGcP.js";import{u as E}from"./testService-NaHZ2zF2.js";import{a as _}from"./utils-DltTuOhC.js";function P(e){const c=L(),{locale:u,t}=g(),{showMessage:o,startLoading:l,endLoading:d}=D(),{deleteTest:f}=E(),{confirm:p}=k(),n=M("test-description"),a=b(!1),m=i(()=>a.value?e.description.replace(/\n/g,"<br />"):e.description.replace(/\n/g,"")),v=i(()=>{if(!e)return"";const r=e.updated_at.toDate();return _(r,u.value)});S(()=>{n.value&&n.value.addEventListener("click",s)}),x(()=>{n.value&&n.value.removeEventListener("click",s)});function s(){a.value=!0}function T(){e&&p(t('Are you sure you want to delete this test: "{name}"?',{name:e.name}),t("Delete"),y)}async function y(){if(e!=null&&e.id)try{l(),await f(e.id),o("success",t("Test deleted with success."))}catch{o("failure",t("Test can not be deleted."))}finally{d()}}async function h(){const r=c.resolve({name:"test-portal",params:{test_id:e.id}}),w=location.origin+r.fullPath;try{await navigator.clipboard.writeText(w),o("success",t("Test link copied!"))}catch{o("failure",t("Sorry, Test link couldn't be copied!"))}}return{showMore:a,description:m,updatedAt:v,confirmTestdeletion:T,copyTestLink:h}}export{P as u};
